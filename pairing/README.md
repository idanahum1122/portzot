# פורצות דרך - מערכת זיווג משתתפות

מערכת אינטראקטיבית לזיווג משתתפות לפי תשובות על שאלון אישיותי.

## 📁 מבנה הקבצים

```
pairing/
├── index.html              ← דף ראשי (HTML בלבד)
├── styles.css              ← עיצוב מלא
├── config.js               ← הגדרות Firebase וקבועים
├── pairing-algorithm.js    ← אלגוריתם זיווג חכם
├── app.js                  ← לוגיקה ראשית
├── logo.png                ← לוגו (אם יש)
├── firestore-rules.txt     ← כללי אבטחה
└── README.md               ← הקובץ הזה
```

## 🚀 התקנה מהירה

### 1. הגדרת Firebase

1. כנסי ל-[Firebase Console](https://console.firebase.google.com)
2. צרי פרויקט חדש
3. הוסיפי **Firestore Database**
4. העתיקי את ה-**API Key** ו-**Project ID**

### 2. עדכון קובץ config.js

פתחי את `config.js` ושני:

```javascript
export const firebaseConfig = {
  apiKey: "YOUR_API_KEY",        // ← שנו לשלכם
  authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID"   // ← שנו לשלכם
};
```

### 3. הגדרת Security Rules

1. כנסי ל-**Firestore Database** → **Rules**
2. העתיקי את התוכן של `firestore-rules.txt`
3. לחצי **Publish**

### 4. יצירת קוד מדריכה

1. כנסי ל-**Firestore Database**
2. לחצי **+ Start collection**
3. **Collection ID**: `instructors`
4. **Document ID**: `2311`
5. **Field**: `active` | **Type**: `boolean` | **Value**: `true`
6. לחצי **Save**

---

## 🎯 איך זה עובד?

### **שלב 1: פתיחת הפעילות**

1. **כל המשתתפות** פותחות את `index.html`
2. הן רואות מסך **"בחירת שותפה לתהליך"**

### **שלב 2: המדריכה נכנסת**

1. **המדריכה** לוחצת על **"כניסת מדריכה"**
2. מזינה קוד **2311**
3. מזינה **מספר משתתפות צפוי** (לדוגמה: 10)
4. לוחצת **"התחל פעילות"** ✅

### **שלב 3: המשתתפות מתחילות**

1. אוטומטית מופיע כפתור **"מתחילות"**
2. המשתתפות לוחצות ומתחילות למלא שאלון
3. השאלון כולל 5 שלבים:
   - **שלב 1**: תחומי עניין (ראשי + משני)
   - **שלב 2**: סגנון עבודה, צוות, קצב
   - **שלב 3**: תפקיד בצוות, מוטיבציה
   - **שלב 4**: לחץ, קונפליקטים, תקשורת, תוכן יומיומי
   - **שלב 5**: רמת חשיבות ההתאמה

### **שלב 4: מעקב התקדמות**

1. המדריכה רואה:
   - **"10/10"** (כמה משתתפות סיימו)
   - עדכון כל 5 שניות
2. כשכולן סיימו → מופיע כפתור **"מחולל זוגות"**

### **שלב 5: תוצאות**

1. המדריכה לוחצת **"מחולל זוגות"**
2. המערכת מחשבת זוגות אופטימליים
3. תוצאות:
   - **המדריכה רואה**: לוח עם כל הזוגות
   - **כל משתתפת רואה**: את השותפה שלה בלבד

---

## 🧠 האלגוריתם

המערכת מזווגת משתתפות לפי **12 קריטריונים**:

### חלוקת הניקוד (100 נקודות מקסימום):

- **30 נק'** - תחומי עניין (ראשי, משני)
- **25 נק'** - סגנון עבודה (התנסות/תכנון, קול רם/שקט, קצב)
- **20 נק'** - תפקיד בצוות (רעיונות, ארגון, הסבר, פתרון בעיות) + מוטיבציה
- **25 נק'** - תקשורת ומתח (לחץ, קונפליקטים, תקשורת)
- **10 נק'** - תחומי עניין אישיים

### קומבינציות מיוחדות:

- ✅ **רעיונות + ארגון** → +2 בונוס
- ✅ **אחת לחץ + אחת תכנון** → +9 נקודות
- ✅ **שתיהן מחפשות פשרה** → +9 נקודות

### כפל לפי חשיבות:

- אם אחת מהמשתתפות בחרה **"מאוד חשוב - אני רוצה התאמה הכי טובה"**
- הניקוד מוכפל ב-**x1.3**

---

## ⚙️ הגדרות מערכת

### זמנים:

- **זמן פעילות**: 15 דקות (SESSION_DURATION_MS)
- **ריענון מעקב**: כל 5 שניות
- **תוקף תשובות**: 24 שעות (DAY_MS)

### קוד מדריכה:

- קוד ברירת מחדל: **2311**
- ניתן לשנות ב-`config.js` (VALID_CODE)

---

## 🔒 אבטחה

### מה מוגן:

✅ רק מי שיודע **2311** יכול להתחיל פעילות  
✅ רק אם יש **session פעיל** אפשר להוסיף תשובות  
✅ **אי אפשר למחוק** או לשנות תשובות  

### מה לא חשוף:

- API Key חשוף בקוד (זה תקין ב-Firebase)
- **חובה** להגדיר Security Rules כדי להגן על המידע

---

## 📊 מבנה הנתונים

### Collections:

```
instructors/
  2311/
    active: true

sessions/
  active/
    started: true
    startTime: 1234567890
    expiresAt: 1234567890 + 24h
    pairingReady: false
    instructorCode: "2311"
    expectedCount: 10
    updatedAt: 1234567890

responses/
  {responseId}/
    sessionId: "active"
    deviceId: "..."
    displayName: "שם"
    mainDomain: "..."
    secondDomain: "..."
    workStyle: "..."
    ...
    createdAt: 1234567890
    expiresAt: 1234567890 + 24h
```

---

## 🛠️ פתרון בעיות

### **הכפתור "מתחילות" לא מופיע**

- ודאי שהמדריכה לחצה **"התחל פעילות"**
- בדקי ש-`SESSION_ID` נשמר ב-Firestore
- בדקי שה-Security Rules מאפשרים יצירת session

### **המדריכה לא רואה התקדמות**

- ודאי שהמשתתפות שלחו את השאלון
- בדקי שה-`sessionId` זהה בכל התשובות
- בדקי את הקונסול לשגיאות Firebase

### **לא מופיעות תוצאות**

- ודאי שכל המשתתפות סיימו (המונה מלא)
- בדקי שהמדריכה לחצה על **"מחולל זוגות"**
- בדקי שה-`pairingReady` שונה ל-`true`

---

## 📁 מבנה קבצי המקור

### **index.html**
- מבנה HTML בלבד
- כל המסכים (פתיחה, שאלון, המתנה, תוצאות)
- ללא JS או CSS משובץ

### **styles.css**
- עיצוב מלא
- אנימציות
- responsive design

### **config.js**
- הגדרות Firebase
- קבועים (זמנים, קודים)
- ניתן לשינוי קל

### **pairing-algorithm.js**
- פונקציית `calculateScore(a, b)`
- פונקציית `pickBestPairs(students)`
- לוגיקה טהורה ללא תלות

### **app.js**
- אתחול Firebase
- ניהול מצב (state management)
- טיפול באירועים (event handlers)
- ניווט בין מסכים

---

## 🎨 התאמה אישית

### שינוי צבעים:

ערכי את `styles.css`:

```css
:root {
  --accent: #ff3b9a;      /* צבע ראשי */
  --accent2: #8b5cf6;     /* צבע משני */
  --accent3: #06b6d4;     /* צבע שלישי */
}
```

### שינוי זמן פעילות:

ערכי את `config.js`:

```javascript
export const SESSION_DURATION_MS = 20 * 60 * 1000; // 20 דקות
```

### שינוי קוד מדריכה:

ערכי את `config.js`:

```javascript
export const VALID_CODE = "1234"; // קוד חדש
```

ואל תשכחי ליצור מסמך חדש ב-Firestore:
- Collection: `instructors`
- Document ID: `1234`
- Field: `active` = `true`

---

**בהצלחה! 💫**
