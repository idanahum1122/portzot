<!doctype html>
<html lang="he" dir="rtl" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>×–×” ×”×ª×—×™×œ ×××©×”×• ×§×˜×Ÿ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      font-family: 'Rubik', sans-serif;
    }
    
    .gradient-text {
      background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .stem-card {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      transition: all 0.3s ease;
    }
    
    .stem-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
    }
    
    .floating-emoji {
      animation: float 3s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    .pulse-btn {
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(236, 72, 153, 0.4); }
      50% { box-shadow: 0 0 0 15px rgba(236, 72, 153, 0); }
    }
    
    .section-divider {
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--primary-color), var(--secondary-color), transparent);
    }
    
    :root {
      --primary-color: #ec4899;
      --secondary-color: #8b5cf6;
      --bg-color: #fdf4ff;
      --text-color: #1f2937;
      --surface-color: #ffffff;
    }
  </style>
 </head>
 <body class="h-full">
  <!-- Navigation Header -->
  <nav class="fixed top-0 left-1/2 transform -translate-x-1/2 w-full max-w-5xl z-50 bg-white/80 backdrop-blur-md border-b border-pink-100/50">
   <div class="max-w-6xl mx-auto px-6 py-4">
    <div class="flex items-center justify-between">
     <div class="flex items-center gap-3">
      <div class="w-10 h-10 rounded-full bg-gradient-to-br from-pink-500 to-purple-500 flex items-center justify-center">
       <span class="text-xl">ğŸ’¡</span>
      </div>
      <span class="text-xl font-bold gradient-text">××¨×¢×™×•×Ÿ ×œ××•×¦×¨</span>
     </div>
     <div class="flex items-center gap-1 md:gap-3">
      <a href="index.html" class="nav-3d-btn"><span class="nav-icon">ğŸ </span><span class="nav-label">×œ×©×¢×¨</span></a>
     </div>
    </div>
   </div>
  </nav>
  <style>
    .nav-3d-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 8px 12px;
      background: linear-gradient(145deg, #ffffff, #f3e8ff);
      border-radius: 12px;
      box-shadow: 3px 3px 6px rgba(0,0,0,0.1), -2px -2px 5px rgba(255,255,255,0.8);
      transition: all 0.2s ease;
      text-decoration: none;
      min-width: 60px;
    }
    .nav-3d-btn:hover {
      transform: translateY(-2px);
      box-shadow: 4px 4px 10px rgba(0,0,0,0.15), -2px -2px 6px rgba(255,255,255,0.9);
    }
    .nav-icon { font-size: 1.2rem; }
    .nav-label { font-size: 0.7rem; color: #6b7280; margin-top: 2px; }
    @media (max-width: 768px) {
      .nav-label { display: none; }
      .nav-3d-btn { min-width: 44px; padding: 6px 10px; }
    }
    
    /* Mobile Optimizations */
    @media (max-width: 640px) {
      .min-h-screen { min-height: auto; padding-top: 2rem; padding-bottom: 2rem; }
      .text-4xl { font-size: 1.75rem; }
      .text-3xl { font-size: 1.5rem; }
      .text-2xl { font-size: 1.25rem; }
      .text-xl { font-size: 1.1rem; }
      .text-6xl { font-size: 2.5rem; }
      .text-5xl { font-size: 2rem; }
      .p-8 { padding: 1.25rem; }
      .p-10 { padding: 1.5rem; }
      .py-12 { padding-top: 2rem; padding-bottom: 2rem; }
      .py-16 { padding-top: 2.5rem; padding-bottom: 2.5rem; }
      .mb-12 { margin-bottom: 2rem; }
      .mb-8 { margin-bottom: 1.5rem; }
      .gap-6 { gap: 1rem; }
      .floating-emoji { display: none; }
      .stem-card { margin-left: 0.5rem; margin-right: 0.5rem; }
      .topic-box { padding: 1rem; }
      .topic-box .text-5xl { font-size: 2rem; }
      .answer-btn { padding: 1rem; }
      .subdomain-btn { padding: 1rem; }
      .step-indicator { margin-bottom: 1rem; }
      .step-dot { width: 10px; height: 10px; }
      .journey-input { font-size: 1rem; padding: 12px 14px; }
    }
  </style>
  <div id="app-wrapper" class="w-full h-full overflow-auto pt-16" style="background: var(--bg-color);"><!-- Main Content (Article) -->
   <div id="main-content"><!-- Hero Section -->
    <section class="min-h-screen flex flex-col justify-center items-center px-6 py-16 relative overflow-hidden">
     <div class="absolute top-20 right-10 text-6xl floating-emoji opacity-30">
      ğŸ’¡
     </div>
     <div class="absolute bottom-32 left-10 text-5xl floating-emoji opacity-30" style="animation-delay: 1s;">
      ğŸš€
     </div>
     <div class="absolute top-40 left-20 text-4xl floating-emoji opacity-20" style="animation-delay: 0.5s;">
      âœ¨
     </div>
     <div class="max-w-3xl text-center relative z-10">
      <h1 id="main-title" class="text-4xl md:text-6xl font-bold mb-6 gradient-text leading-tight">×–×” ×”×ª×—×™×œ ×××©×”×• ×§×˜×Ÿ</h1>
      <p class="text-xl md:text-2xl mb-8 font-light" style="color: var(--text-color); opacity: 0.8;">(×•×›×›×” ××ª×—×™×œ×™× ×œ×©× ×•×ª ××ª ×”×¢×•×œ×)</p>
      <div class="stem-card rounded-2xl p-8 max-w-xl mx-auto mb-12" style="background: var(--surface-color);">
       <p class="text-lg leading-relaxed" style="color: var(--text-color);">×™×© ×¨×’×¢×™× ×§×˜× ×™× ×‘×™×•×-×™×•× ×©×’×•×¨××™× ×œ×š ×œ×¢×¦×•×¨.<br><br><span class="text-2xl">ğŸ”Š</span> ×©×¨×™×˜×” ×¢×œ ×œ×•×—.<br><span class="text-2xl">ğŸ”‹</span> ××—×•×– ××—×“ ×‘×¡×•×œ×œ×”.<br><span class="text-2xl">ğŸš½</span> ××›×¡×” ××¡×œ×” ×¤×ª×•×— (×›×Ÿ, ×–×” ×›×Ÿ ×¡×•×£ ×”×¢×•×œ×).</p>
      </div>
      <p class="text-lg" style="color: var(--text-color); opacity: 0.7;">×œ× ×“×¨××” ×’×“×•×œ×”. ×œ× "×‘×¢×™×” ×’×œ×•×‘×œ×™×ª".<br>
        ×¨×§ ×ª×—×•×©×” ×§×˜× ×” ×©: <strong class="gradient-text text-2xl">×œ××” ×–×” ×›×›×” ×‘×¢×¦×?</strong></p>
     </div>
     <div class="absolute bottom-8 animate-bounce">
      <svg class="w-8 h-8" style="color: var(--primary-color);" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
      </svg>
     </div>
    </section><!-- The Spark Section -->
    <section class="py-12 px-6">
     <div class="max-w-4xl mx-auto">
      <div class="section-divider mb-10"></div>
      <div class="text-center mb-8"><span class="text-5xl mb-4 block">ğŸŒ±</span>
       <h2 class="text-3xl md:text-4xl font-bold mb-4" style="color: var(--text-color);">×¨×•×‘ ×”×× ×©×™× ×××©×™×›×™× ×”×œ××”</h2>
       <p class="text-2xl gradient-text font-bold bg-white/50 rounded-xl px-6 py-4 inline-block">××‘×œ ×™×–××•×ª ×˜×›× ×•×œ×•×’×™×” ×•-STEM ××ª×—×™×œ×™× ×“×•×•×§× ×©×.</p>
      </div>
      <div class="stem-card rounded-3xl p-10 text-center" style="background: var(--surface-color); border: 3px solid; border-image: linear-gradient(135deg, var(--primary-color), var(--secondary-color)) 1;">
       <h3 class="text-2xl font-bold mb-6" style="color: var(--text-color);">×”×—×™×™× ×”× ×œ× ×”×¤×¡×§×” ××”×œ××™×“×”</h3>
       <p class="text-4xl gradient-text font-bold">×”× ×”×œ××™×“×”</p>
      </div>
     </div>
    </section><!-- What is STEM Section -->
    <section class="py-12 px-6" style="background: linear-gradient(180deg, transparent, rgba(139, 92, 246, 0.05));">
     <div class="max-w-4xl mx-auto">
      <div class="text-center mb-10"><span class="text-5xl mb-4 block">ğŸ”¬</span>
       <h2 class="text-3xl md:text-4xl font-bold mb-6" style="color: var(--text-color);">STEM ×œ× ××ª×—×™×œ ×‘×›×™×ª×”</h2>
       <p class="text-xl" style="color: var(--text-color); opacity: 0.8;">×”×•× ××ª×—×™×œ ×‘×—×™×™× ×¢×¦××.</p>
      </div>
      <div class="grid md:grid-cols-2 gap-6 mb-8">
       <div class="stem-card rounded-2xl p-6" style="background: var(--surface-color);">
        <div class="text-3xl mb-3">
         ğŸ§ª
        </div>
        <h3 class="font-bold text-lg mb-2" style="color: var(--text-color);">××“×¢</h3>
        <p style="color: var(--text-color); opacity: 0.7;">×¢×•×–×¨ ×œ×”×‘×™×Ÿ ××ª ×”×‘×¢×™×”</p>
       </div>
       <div class="stem-card rounded-2xl p-6" style="background: var(--surface-color);">
        <div class="text-3xl mb-3">
         ğŸ’»
        </div>
        <h3 class="font-bold text-lg mb-2" style="color: var(--text-color);">×˜×›× ×•×œ×•×’×™×”</h3>
        <p style="color: var(--text-color); opacity: 0.7;">×××¤×©×¨×ª ×œ×©×™× ×•×™ ×œ×§×¨×•×ª ×‘×¤×•×¢×œ</p>
       </div>
       <div class="stem-card rounded-2xl p-6" style="background: var(--surface-color);">
        <div class="text-3xl mb-3">
         âš™ï¸
        </div>
        <h3 class="font-bold text-lg mb-2" style="color: var(--text-color);">×”× ×“×¡×”</h3>
        <p style="color: var(--text-color); opacity: 0.7;">××ª×›× × ×ª, ×‘×•×“×§×ª ×•××©×¤×¨×ª</p>
       </div>
       <div class="stem-card rounded-2xl p-6" style="background: var(--surface-color);">
        <div class="text-3xl mb-3">
         ğŸ“
        </div>
        <h3 class="font-bold text-lg mb-2" style="color: var(--text-color);">××ª××˜×™×§×”</h3>
        <p style="color: var(--text-color); opacity: 0.7;">×¢×•×–×¨×ª ×œ××“×•×“, ×œ×”×©×•×•×ª ×•×œ×”×—×œ×™×˜</p>
       </div>
      </div>
      <div class="text-center">
       <p class="text-lg" style="color: var(--text-color); opacity: 0.8;">×”×ª×”×œ×™×š ×”×ª×›× ×•× ×™ ×”×•× ×”××§×•× ×©×‘×• ×”×›×•×œ × ×¤×’×©.<br><strong class="text-xl gradient-text">×œ× ×‘×¨×’×¢ ××—×“. ×œ× ×‘×§×¡×. ××œ× ×©×œ×‘ ××—×¨×™ ×©×œ×‘.</strong></p>
      </div>
     </div>
    </section><!-- Stop & Ask Section -->
    <section class="py-12 px-6">
     <div class="max-w-4xl mx-auto">
      <div class="stem-card rounded-3xl p-10 md:p-16" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
       <div class="text-center text-white"><span class="text-5xl mb-6 block">âœ‹</span>
        <h2 class="text-3xl md:text-4xl font-bold mb-6">×¨×’×¢. ×¢×•×¦×¨×™×. ×œ× ×¤×•×ª×¨×™×.</h2>
        <p class="text-lg opacity-90 mb-8 max-w-2xl mx-auto">×™×© ×œ× ×• × ×˜×™×™×” ×‘×¢×™×™×ª×™×ª ×œ×¨×•×¥ ×§×“×™××”: ×œ×”×¦×™×¢ ×¨×¢×™×•×Ÿ, ×œ×—×©×•×‘ ×¢×œ ××¤×œ×™×§×¦×™×”, ×œ×”××¦×™× ××•×¦×¨. <br><br>
          ××‘×œ ×‘×ª×”×œ×™×š ×ª×›× ×•× ×™ ×××™×ª×™ ×¢×•×©×™× ××©×”×• ××—×¨ ×œ×’××¨×™.</p>
        <div class="bg-white/20 rounded-2xl p-6 backdrop-blur-sm max-w-md mx-auto">
         <p class="font-bold text-xl mb-4">×•×©×•××œ×™× ×©××œ×•×ª:</p>
         <p class="text-lg">ğŸ“ ××™×¤×” ×–×” ×§×•×¨×”?<br>
           ğŸ‘¤ ×œ××™ ×–×” ×§×•×¨×”?<br>
           ğŸš« ××” ×–×” ××•× ×¢?</p>
        </div>
       </div>
      </div>
     </div>
    </section><!-- The Magic Section -->
    <section class="py-12 px-6" style="background: var(--surface-color);">
     <div class="max-w-4xl mx-auto text-center"><span class="text-5xl mb-6 block">âœ¨</span>
      <h2 class="text-3xl md:text-4xl font-bold mb-6" style="color: var(--text-color);">×‘×¨×’×¢ ×”×–×” ×§×•×¨×” ×§×¡× ×©×§×˜</h2>
      <div class="flex flex-col md:flex-row items-center justify-center gap-6 mb-8">
       <div class="stem-card rounded-2xl p-6 flex-1" style="background: var(--bg-color);">
        <p class="text-lg" style="color: var(--text-color);">×¢×•×‘×¨×™× ×<strong>×¨×’×©</strong></p>
        <p class="text-2xl mt-2">"×–×” ××¢×¦×‘×Ÿ" ğŸ˜¤</p>
       </div>
       <div class="text-4xl">
        â¬…ï¸
       </div>
       <div class="stem-card rounded-2xl p-6 flex-1" style="background: var(--bg-color);">
        <p class="text-lg" style="color: var(--text-color);">×œ<strong>×ª×™××•×¨ ×©×œ ××¦×‘</strong></p>
        <p class="text-2xl mt-2 gradient-text font-bold">×‘×¢×™×” ×©××¤×©×¨ ×œ×¢×‘×•×“ ××™×ª×” ğŸ’¡</p>
       </div>
      </div>
      <div class="stem-card rounded-2xl p-8 max-w-xl mx-auto" style="background: linear-gradient(135deg, rgba(236, 72, 153, 0.15), rgba(139, 92, 246, 0.15)); border: 2px solid rgba(236, 72, 153, 0.3);">
       <h3 class="text-xl font-bold mb-4" style="color: var(--text-color);">×‘×¢×™×” â‰  ×¤×ª×¨×•×Ÿ</h3>
       <p class="text-3xl font-bold gradient-text">×‘×¢×™×” â†’ ×¦×•×¨×š</p>
       <p class="mt-4 text-base" style="color: var(--text-color); opacity: 0.9;"><strong>×¦×•×¨×š ×”×•× ×œ× ××•×¦×¨, ×œ× ×©× ××’× ×™×‘, ×•×œ× ×¨×¢×™×•×Ÿ ×¡×’×•×¨.</strong><br>
         ×¦×•×¨×š ×”×•× ×”×‘× ×” ×¢××•×§×” ×©×œ ××” ×¦×¨×™×š ×œ×”×©×ª× ×•×ª.</p>
      </div>
     </div>
    </section><!-- Process Section -->
    <section class="py-12 px-6">
     <div class="max-w-6xl mx-auto">
      <div class="text-center mb-10"><span class="text-5xl mb-4 block">ğŸ› ï¸</span>
       <h2 class="text-3xl md:text-4xl font-bold mb-4" style="color: var(--text-color);">×›×š × ×¨××” ×”×ª×”×œ×™×š ×©×œ× ×•</h2>
       <p class="text-lg" style="color: var(--text-color); opacity: 0.8;">××•×¦×¨ ×˜×•×‘ ×œ× × ×•×œ×“ ××¨×¢×™×•×Ÿ ××‘×¨×™×§ ××—×“. ×”×•× × ×‘× ×” ×“×¨×š ×ª×”×œ×™×š.</p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
       <div class="stem-card rounded-2xl p-6 flex flex-col" style="background: var(--surface-color);">
        <div class="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold mb-4 mx-auto" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
         1
        </div>
        <h3 class="font-bold text-lg mb-3 gradient-text text-center">×××ª×¨×•×ª ××ª×’×¨</h3>
        <p class="text-sm flex-grow" style="color: var(--text-color); opacity: 0.8;">××–×”×•×ª ×‘×¢×™×”, ××’×“×™×¨×•×ª ×¦×•×¨×š ×•××‘×™× ×•×ª ×œ××™ ×–×” ×§×•×¨×” ×‘×××ª. ×¢×•×‘×“×•×ª ×¢× ×§×”×œ ×™×¢×“ ×•×¤×¨×¡×•× ×” ×›×“×™ ×œ× ×œ×“×‘×¨ ×‘××•×•×™×¨ â€” ××œ× ×¢×œ ××©×ª××©×ª ×××™×ª×™×ª.</p>
       </div>
       <div class="stem-card rounded-2xl p-6 flex flex-col" style="background: var(--surface-color);">
        <div class="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold mb-4 mx-auto" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
         2
        </div>
        <h3 class="font-bold text-lg mb-3 gradient-text text-center">×—×•×©×‘×•×ª ××—×¨×ª</h3>
        <p class="text-sm flex-grow" style="color: var(--text-color); opacity: 0.8;">×—×•×§×¨×•×ª ××ª ×”×‘×¢×™×” ×œ×¢×•××§, ×‘×•×“×§×•×ª ×¤×ª×¨×•× ×•×ª ×§×™×™××™× ×•×¢×•×©×•×ª ×¡×™×¢×•×¨ ××•×—×•×ª ×™×¦×™×¨×ª×™ ×‘×œ×™ ×œ×¤×¡×•×œ ×¨×¢×™×•× ×•×ª ××”×¨ ××“×™.</p>
       </div>
       <div class="stem-card rounded-2xl p-6 flex flex-col" style="background: var(--surface-color);">
        <div class="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold mb-4 mx-auto" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
         3
        </div>
        <h3 class="font-bold text-lg mb-3 gradient-text text-center">××’×‘×©×•×ª ×¤×ª×¨×•×Ÿ</h3>
        <p class="text-sm flex-grow" style="color: var(--text-color); opacity: 0.8;">×‘×•×—×¨×•×ª ×¨×¢×™×•×Ÿ ××—×“, ××¤×ª×—×•×ª ×§×•× ×¡×¤×˜ ××•×¦×¨, ×‘×•×“×§×•×ª ×¢×¨×š ×œ××©×ª××©×ª, ××§×‘×œ×•×ª ×”×—×œ×˜×•×ª GO / NO-GO ×•××©×ª××©×•×ª ×‘-AI ×‘×¦×•×¨×” ××—×¨××™×ª ×›×›×œ×™ ×œ×—×©×™×‘×” â€“ ×œ× ×§×™×¦×•×¨ ×“×¨×š.</p>
       </div>
       <div class="stem-card rounded-2xl p-6 flex flex-col" style="background: var(--surface-color);">
        <div class="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold mb-4 mx-auto" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
         4
        </div>
        <h3 class="font-bold text-lg mb-3 gradient-text text-center">××¢×¦×‘×•×ª ××‘×˜×™×¤×•×¡</h3>
        <p class="text-sm flex-grow" style="color: var(--text-color); opacity: 0.8;">×”×¨×¢×™×•×Ÿ ××§×‘×œ ×¦×•×¨×”. ××‘×˜×™×¤×•×¡, ×›×œ×™ AI ×•×—×•×•×™×™×ª ××©×ª××©. ×–×” × ×™×¡×•×™, ×œ× ××•×¦×¨ ××•×©×œ×.</p>
       </div>
       <div class="stem-card rounded-2xl p-6 flex flex-col" style="background: var(--surface-color);">
        <div class="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold mb-4 mx-auto" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
         5
        </div>
        <h3 class="font-bold text-lg mb-3 gradient-text text-center">××“×™×™×§×•×ª ××™×–×</h3>
        <p class="text-sm flex-grow" style="color: var(--text-color); opacity: 0.8;">××§×‘×œ×•×ª ××©×•×‘, ×× ×ª×—×•×ª ×ª×’×•×‘×•×ª ×•××©×¤×¨×•×ª. ×œ× × ×¢×œ×‘×•×ª â€” ××©×ª×¤×¨×•×ª.</p>
       </div>
       <div class="stem-card rounded-2xl p-6 flex flex-col" style="background: var(--surface-color);">
        <div class="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold mb-4 mx-auto" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
         6
        </div>
        <h3 class="font-bold text-lg mb-3 gradient-text text-center">×××ª×’×•×ª ×•××‘×¡×¡×•×ª</h3>
        <p class="text-sm flex-grow" style="color: var(--text-color); opacity: 0.8;">×‘×•× ×•×ª ×¡×™×¤×•×¨ ××•×¦×¨, ×¤×•×¡×˜×¨ ×—×§×¨ ×•×¡×¨×˜×•×Ÿ AI, ×œ×•××“×•×ª ××™×š ×œ×©×•×•×§ ×¨×¢×™×•×Ÿ ×•××™×š ×œ××¤×™×™×Ÿ ×§×”×œ ×‘×¨×©×ª×•×ª.</p>
       </div>
       <div class="stem-card rounded-2xl p-6 flex flex-col" style="background: var(--surface-color);">
        <div class="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold mb-4 mx-auto" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
         7
        </div>
        <h3 class="font-bold text-lg mb-3 gradient-text text-center">××¦×™×’×•×ª ×•××©×›× ×¢×•×ª</h3>
        <p class="text-sm flex-grow" style="color: var(--text-color); opacity: 0.8;">×‘×•× ×•×ª ×¤×™×¥', ××¦×™×’×•×ª ×¤×¨×–× ×˜×¦×™×” ×•×œ×•××“×•×ª ×œ×¡×¤×¨ ×ª×”×œ×™×š â€” ×œ× ×¨×§ ×ª×•×¦××”.</p>
       </div>
       <div class="stem-card rounded-2xl p-6 flex flex-col" style="background: var(--surface-color);">
        <div class="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold mb-4 mx-auto" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
         8
        </div>
        <h3 class="font-bold text-lg mb-3 gradient-text text-center">××©×™×§×•×ª ×•××©×¤×™×¢×•×ª</h3>
        <p class="text-sm flex-grow" style="color: var(--text-color); opacity: 0.8;">××¦×™×’×•×ª ××ª ×”××™×–×, ××©×™×§×•×ª ××•×ª×• ×•×—×•×©×‘×•×ª ×§×“×™××”: ××™×š ×–×” ×××©×™×š, ××™×š ×–×” ×’×“×œ ×•××™×š ×–×” ××©×¤×™×¢.</p>
       </div>
      </div>
     </div>
    </section><!-- Where Are You Now Section -->
    <section class="py-12 px-6" style="background: linear-gradient(180deg, rgba(236, 72, 153, 0.05), rgba(139, 92, 246, 0.1));">
     <div class="max-w-4xl mx-auto text-center"><span class="text-6xl mb-6 block">ğŸ“</span>
      <h2 class="text-3xl md:text-4xl font-bold mb-6" style="color: var(--text-color);">××– ××™×¤×” ××ª×Ÿ ×¢×›×©×™×•?</h2>
      <p class="text-xl mb-6 gradient-text font-semibold">×‘×“×™×•×§ ×‘×ª×—×™×œ×ª ×”×“×¨×š.</p>
      <div class="stem-card rounded-3xl p-10 max-w-2xl mx-auto mb-8" style="background: var(--surface-color); border: 3px solid; border-image: linear-gradient(135deg, var(--primary-color), var(--secondary-color)) 1;">
       <p class="text-lg mb-6" style="color: var(--text-color);">×× ×—× ×• ×”×™×•× ×‘×©×œ×‘ ×”×¨××©×•×Ÿ: <strong class="text-2xl gradient-text">××™×ª×•×¨ ×‘×¢×™×”</strong>.</p>
       <p style="color: var(--text-color); opacity: 0.8;">×¢×•×“ ×œ× ×‘×•× ×•×ª.<br>
         ×¢×•×“ ×œ× ××¤×ª×—×•×ª.<br><strong class="text-lg gradient-text">×¨×§ ××ª×‘×•× × ×•×ª, ×©×•××œ×•×ª ×•××“×™×™×§×•×ª.</strong></p>
       <p class="mt-6 font-bold gradient-text text-xl">×•×–×” ××—×“ ×”×©×œ×‘×™× ×”×›×™ ×—×©×•×‘×™× ×‘×ª×”×œ×™×š.</p>
      </div>
     </div>
    </section><!-- CTA Section -->
    <section class="py-16 px-6">
     <div class="max-w-3xl mx-auto text-center">
      <div class="stem-card rounded-2xl p-8 mb-10" style="background: linear-gradient(135deg, rgba(236, 72, 153, 0.1), rgba(139, 92, 246, 0.1)); border: 2px solid var(--primary-color);">
       <p class="text-xl font-bold mb-6" style="color: var(--text-color);">âœ¨ ×œ×¤× ×™ ×©××ª×Ÿ ××ª×—×™×œ×•×ª, ×§×¨×™×˜×¨×™×•× ×™× ×œ×‘×—×™×¨×”:</p>
       <div class="text-right space-y-4" style="color: var(--text-color);">
        <p class="text-lg">âœ“ ×§×•×¨×” ×œ×›×Ÿ ×‘×¢×¦××›×Ÿ, ×œ× ×¨×§ ×œ××™×©×”×• ××—×¨</p>
        <p class="text-lg">âœ“ ×—×•×–×¨ ×¢×œ ×¢×¦××•, ×œ× ××©×”×• ×—×“Ö¾×¤×¢××™</p>
        <p class="text-lg">âœ“ ×’×•×¨× ×œ×›×Ÿ ×œ×¢×¦×•×¨ ×¨×’×¢ ×•×œ×”×’×™×“ "××•×£"</p>
       </div>
      </div>
      <span class="text-6xl mb-6 block">ğŸ‘‡</span> <button id="cta-button" class="pulse-btn text-white text-xl font-bold px-12 py-5 rounded-full shadow-2xl transform hover:scale-105 transition-all duration-300" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));"> ×”×ª×—×™×œ×™ ××ª ×”×¤×¢×™×œ×•×ª </button>
      <div class="mt-12 stem-card rounded-2xl p-8" style="background: var(--surface-color); border: 2px solid; border-image: linear-gradient(135deg, var(--primary-color), var(--secondary-color)) 1;">
       <p class="text-xl font-bold mb-4" style="color: var(--text-color);">×›×™ ×›×œ ×©×™× ×•×™ ×’×“×•×œ</p>
       <p class="text-2xl gradient-text font-bold">××ª×—×™×œ ××‘×¢×™×” ×§×˜× ×” ××—×ª,<br>
         ×©×œ× × ×ª×ª ×œ×” ×œ×¢×‘×•×¨ ×œ×™×“×š.</p>
      </div>
      <div class="mt-16 flex justify-center gap-4"><span class="text-3xl floating-emoji">ğŸ’ª</span> <span class="text-3xl floating-emoji" style="animation-delay: 0.3s;">ğŸŒŸ</span> <span class="text-3xl floating-emoji" style="animation-delay: 0.6s;">ğŸš€</span>
      </div>
     </div>
    </section><!-- Footer -->
    <footer class="py-12 px-6 bg-gradient-to-r from-pink-500 to-purple-500 text-white">
     <div class="max-w-5xl mx-auto text-center">
      <div class="flex items-center justify-center gap-3 mb-6">
       <div class="w-10 h-10 rounded-full bg-white/20 flex items-center justify-center">
        <span class="text-xl">ğŸ’¡</span>
       </div>
       <span class="text-2xl font-bold">××¨×¢×™×•×Ÿ ×œ××•×¦×¨</span>
      </div>
      <p class="text-white/80 text-lg mb-4">×–×” ×”×ª×—×™×œ ×××©×”×• ×§×˜×Ÿ</p>
      <p class="text-white/60 text-sm">×ª×•×›× ×™×ª ×—×™× ×•×›×™×ª ×œ× ×¢×¨×•×ª | × ×‘× ×” ×¢×‘×•×¨ ×‘× ×•×ª ×©×™×©× ×• ××ª ×”×¢×•×œ×</p>
      <p class="text-white/50 text-xs mt-4">Â© 2026 ×¤×•×¨×¦×•×ª ×“×¨×š</p>
     </div>
    </footer>
   </div><!-- Journey View -->
   <div id="journey-view" style="display: none;">
    <section class="min-h-screen py-16 px-6">
     <div class="max-w-3xl mx-auto">
      <div id="journey-step-container" class="journey-fade-in"></div>
      <div class="text-center mt-8">
       <button id="back-to-article-btn" onclick="showMainView()" class="text-lg font-bold px-8 py-4 rounded-full transition-all duration-300" style="background: var(--surface-color); color: var(--text-color); border: 2px solid var(--primary-color);">â† ×—×–×¨×” ×œ××××¨</button>
      </div>
     </div>
    </section>
   </div>
  </div>
  <div id="pdf-render-area" style="position: absolute; left: -9999px; top: 0; width: 794px;"></div>
  <style>
    .pdf-page {
      width: 794px;
      min-height: 1123px;
      padding: 60px;
      box-sizing: border-box;
      font-family: 'Rubik', sans-serif;
      direction: rtl;
      background: #fff;
      position: relative;
      overflow: hidden;
    }
    .pdf-page .pdf-gradient-bar {
      position: absolute;
      top: 0;
      right: 0;
      left: 0;
      height: 8px;
      background: linear-gradient(90deg, #ec4899, #8b5cf6);
    }
    .pdf-page .pdf-bottom-bar {
      position: absolute;
      bottom: 0;
      right: 0;
      left: 0;
      height: 8px;
      background: linear-gradient(90deg, #8b5cf6, #ec4899);
    }
    .journey-fade-in {
      animation: journeyFadeIn 0.5s ease-out;
    }
    @keyframes journeyFadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .journey-input {
      width: 100%;
      padding: 14px 18px;
      border-radius: 16px;
      border: 2px solid rgba(236, 72, 153, 0.3);
      background: var(--surface-color);
      color: var(--text-color);
      font-size: 1.1rem;
      font-family: 'Rubik', sans-serif;
      outline: none;
      transition: border-color 0.3s;
      text-align: right;
    }
    .journey-input:focus {
      border-color: var(--primary-color);
    }
    .journey-input::placeholder {
      color: #aaa;
    }
    .topic-box {
      cursor: pointer;
      transition: all 0.3s ease;
      border: 3px solid transparent;
    }
    .topic-box:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.1);
    }
    .topic-box.selected {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(236, 72, 153, 0.2);
    }
    .answer-btn {
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid rgba(236, 72, 153, 0.2);
    }
    .answer-btn:hover {
      transform: translateY(-2px);
      border-color: var(--primary-color);
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    }
    .step-indicator {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 2rem;
    }
    .step-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: rgba(236, 72, 153, 0.2);
      transition: all 0.3s;
    }
    .step-dot.active {
      background: var(--primary-color);
      transform: scale(1.3);
    }
    .step-dot.completed {
      background: var(--secondary-color);
    }
    .subdomain-btn {
      cursor: pointer;
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }
    .subdomain-btn:hover {
      transform: translateY(-2px);
      border-color: var(--primary-color);
    }
    .subdomain-btn.selected {
      border-color: var(--primary-color);
      background: linear-gradient(135deg, rgba(236, 72, 153, 0.1), rgba(139, 92, 246, 0.1)) !important;
    }
  </style>
  <script>
    const defaultConfig = {
      primary_color: '#ec4899',
      secondary_color: '#8b5cf6',
      background_color: '#fdf4ff',
      text_color: '#1f2937',
      surface_color: '#ffffff',
      font_family: 'Rubik',
      font_size: 18,
      main_title: '×–×” ×”×ª×—×™×œ ×××©×”×• ×§×˜×Ÿ',
      button_text: '×”×ª×—×™×œ×™ ××ª ×”×¤×¢×™×œ×•×ª'
    };

    let config = { ...defaultConfig };

    const journeyData = {
      names: [],
      topicChoices: {},
      primaryTopic: null,
      answers: [],
      domain: null,
      subDomain: null,
      decision: null,
      currentStep: 1,
      currentQuestionIndex: 0,
      questionPath: []
    };

    const topicBoxes = [
      { id: 'daily', emoji: 'ğŸª', title: '×‘×—×™×¨×•×ª ×™×•××™×•××™×•×ª', subtitle: '×”×“×‘×¨×™× ×”×§×˜× ×™× ×©××¢×¦×‘× ×™× ××•×ª× ×• ×›×œ ×™×•×' },
      { id: 'identity', emoji: 'ğŸ’¬', title: '×–×”×•×ª ×•××™ ×× ×™', subtitle: '××™ ×× ×™ ×›×©××£ ××—×“ ×œ× ××¡×ª×›×œ?' },
      { id: 'relationships', emoji: 'ğŸ‘­', title: '××¢×¨×›×•×ª ×™×—×¡×™×', subtitle: '×œ××” ×–×” ×ª××™×“ ××¡×•×‘×š ×¢× ×× ×©×™×?' },
      { id: 'boundaries', emoji: 'ğŸš§', title: '×’×‘×•×œ×•×ª', subtitle: '××™×¤×” ×× ×™ × ×’××¨×ª ×•××™×¤×” ×”×¢×•×œ× ××ª×—×™×œ?' },
      { id: 'inner-voice', emoji: 'ğŸ—£ï¸', title: '×§×•×œ ×¤× ×™××™', subtitle: '××” ×”×§×•×œ ×‘×¨××© ×©×œ×™ ××•××¨ ×œ×™?' }
    ];

    const questionTrees = {
      daily: [
        {
          text: '××” ×™×•×ª×¨ ×’×•×¨× ×œ×š ×œ×”×©×ª×’×¢ - ×›×©××ª ×™×•×“×¢×ª ××” ×”×‘×¢×™×” ×•××£ ××—×“ ×œ× ×¢×•×©×” ×©×•× ×“×‘×¨ ××• ×›×©××ª ××¨×’×™×©×” ×©××©×”×• ×œ× ×‘×¡×“×¨ ××‘×œ ×œ× ×™×›×•×œ×” ×œ×©×™× ××ª ×”××¦×‘×¢ ×¢×œ ××”?',
          options: [
            { text: '×™×•×“×¢×ª ×•×œ× ×¢×•×©×™×', value: 'A', next: 'q2a' },
            { text: '××¨×’×™×©×” ××‘×œ ×œ× ××“×™×™×§×ª', value: 'B', next: 'q2b' }
          ]
        },
        {
          id: 'q2a',
          text: '××ª ×©××” ×œ×‘ ×©××©×”×• ×©×‘×•×¨ - ×•××£ ××—×“ ××¡×‘×™×‘ ×œ× ×§×•×œ×˜. ××” ××ª ×¢×•×©×”?',
          options: [
            { text: '×× ×¡×” ×œ×ª×§×Ÿ ×œ×‘×“', value: 'A' },
            { text: '××—×¤×©×ª ××™×©×”×™ ×©×ª×§×œ×•×˜ ××™×ª×™', value: 'B' }
          ]
        },
        {
          id: 'q2b',
          text: '××ª×™ ×–×” ×”×›×™ ×ª×•×¤×¡ ××•×ª×š - ×‘×‘×•×§×¨ ×›×©×”×›×œ ××ª×—×™×œ ×‘×××¦×¢ ×”×™×•× ×›×©×›×‘×¨ ××™×Ÿ ×›×•×— ××• ×‘×œ×™×œ×” ×›×©×”××—×©×‘×•×ª ×œ× ×¢×•×–×‘×•×ª?',
          options: [
            { text: '×‘×‘×•×§×¨', value: 'A' },
            { text: '×‘×××¦×¢ ×”×™×•×', value: 'B' },
            { text: '×‘×œ×™×œ×”', value: 'C' }
          ]
        },
        {
          text: '×ª×“××™×™× ×™ ×©×™×© ×œ×š ×›×•×—-×¢×œ ××—×“: ×œ×¨××•×ª ×‘×¢×™×•×ª ×©××£ ××—×“ ×œ× ×¨×•××” ××• ×œ×”××¦×™× ×¤×ª×¨×•× ×•×ª ×©××£ ××—×“ ×œ× ×—×©×‘ ×¢×œ×™×”×?',
          options: [
            { text: '×œ×¨××•×ª ×‘×¢×™×•×ª', value: 'A' },
            { text: '×œ×”××¦×™× ×¤×ª×¨×•× ×•×ª', value: 'B' }
          ]
        },
        {
          text: '××” ×™×•×ª×¨ ×—×©×•×‘ ×œ×š - ×©×”×¤×ª×¨×•×Ÿ ×™×¢×‘×•×“ ××•×©×œ× ×œ××“× ××—×“ ××• ×©×™×¢×‘×•×“ ×‘×¡×‘×™×¨×•×ª ×œ×›×•×œ×?',
          options: [
            { text: '××•×©×œ× ×œ××—×ª', value: 'A' },
            { text: '×‘×¡×‘×™×¨×•×ª ×œ×›×•×œ×', value: 'B' }
          ]
        }
      ],
      identity: [
        {
          text: '××ª×™ ×”×¨×’×©×ª ×”×›×™ ×—×–×§×” - ×›×©×¢×©×™×ª ××©×”×• ×©××£ ××—×“ ×œ× ×¦×™×¤×” ×××š ××• ×›×©×¢×©×™×ª ×‘×“×™×•×§ ××” ×©×¨×¦×™×ª ×œ××¨×•×ª ×©×××¨×• ×œ×š ×œ×?',
          options: [
            { text: '×”×¤×ª×¢×ª×™ ××ª ×›×•×œ×', value: 'A', next: 'q2a' },
            { text: '×¢×©×™×ª×™ ×œ××¨×•×ª ×”\'×œ×\'', value: 'B', next: 'q2b' }
          ]
        },
        {
          id: 'q2a',
          text: '××ª ×™×•×ª×¨ ××”×¡×•×’ ×©××©× ×” ×—×•×§×™× ××• ××”×¡×•×’ ×©×××¦×™× ××©×—×§ ×—×“×© ×œ×’××¨×™?',
          options: [
            { text: '××©× ×” ×—×•×§×™×', value: 'A' },
            { text: '×××¦×™××” ××©×—×§ ×—×“×©', value: 'B' }
          ]
        },
        {
          id: 'q2b',
          text: '×”×”\'×œ×\' ×©×××¨×• ×œ×š - ×”×•× ×”×’×™×¢ ×××™×©×”×• ×©×—×©×•×‘ ×œ×š ××• ×××™×©×”×• ×©×‘×›×œ×œ ×œ× ××›×™×¨ ××•×ª×š?',
          options: [
            { text: '×××™×©×”×• ×—×©×•×‘', value: 'A' },
            { text: '×××™×©×”×• ×©×œ× ××›×™×¨ ××•×ª×™', value: 'B' }
          ]
        },
        {
          text: '×× ×”×™×™×ª ×¦×¨×™×›×” ×œ×‘×—×•×¨ ×¡×•×¤×¨-×¤××•×•×¨: ×œ×”×‘×™×Ÿ ××” ×× ×©×™× ×‘×××ª ××¨×’×™×©×™× ××• ×œ×“×¢×ª ×œ×ª×¨×’× ×¨×’×©×•×ª ×œ××™×œ×™× ××“×•×™×§×•×ª?',
          options: [
            { text: '×œ×”×‘×™×Ÿ ×¨×’×©×•×ª', value: 'A' },
            { text: '×œ×ª×¨×’× ×œ××™×œ×™×', value: 'B' }
          ]
        },
        {
          text: '××” ××¨×’×™×©×” ×œ×š ×™×•×ª×¨ ×›××• \'××ª\' - ×œ×¢××•×“ ××•×œ ×›×•×œ× ×•×œ×”×•×‘×™×œ ××• ×œ×¤×¢×•×œ ×××—×•×¨×™ ×”×§×œ×¢×™× ×•×œ×”×–×™×– ××ª ×”×¢×•×œ× ×‘×©×§×˜?',
          options: [
            { text: '×œ×”×•×‘×™×œ ××œ×¤× ×™×', value: 'A' },
            { text: '×œ×”×–×™×– ×××—×•×¨×”', value: 'B' }
          ]
        }
      ],
      relationships: [
        {
          text: '××” ×™×•×ª×¨ ×§×©×” - ×›×©×—×‘×¨×” ×˜×•×‘×” ×œ× ××‘×™× ×” ××•×ª×š ×‘×›×œ×œ ××• ×›×©××™×©×”×™ ×–×¨×” ××‘×™× ×” ××•×ª×š ×™×•×ª×¨ ××“×™?',
          options: [
            { text: '×—×‘×¨×” ×œ× ××‘×™× ×”', value: 'A', next: 'q2a' },
            { text: '×–×¨×” ××‘×™× ×” ×™×•×ª×¨ ××“×™', value: 'B', next: 'q2b' }
          ]
        },
        {
          id: 'q2a',
          text: '××ª ×××œ×” ×©××“×‘×¨×•×ª ×¢×œ ××” ×©×›×•××‘ ××• ×××œ×” ×©××¨××•×ª ×©×”×›×œ ×‘×¡×“×¨ ×¢×“ ×©××ª×¤×•×¦×¦×•×ª?',
          options: [
            { text: '××“×‘×¨×ª ×¢×œ ×–×”', value: 'A' },
            { text: '××¨××” ×©×”×›×œ ×‘×¡×“×¨', value: 'B' }
          ]
        },
        {
          id: 'q2b',
          text: '×œ××” ×–×” ××¨×’×™×© ××•×–×¨ ×›×©××™×©×”×™ \'×¨×•××”\' ××•×ª×š - ×›×™ ××ª ×œ× ×¨×’×™×œ×” ××• ×›×™ ××ª ×œ× ×‘×˜×•×—×” ×©××” ×©×”×™× ×¨×•××” ×–×” ×‘×××ª ××ª?',
          options: [
            { text: '×œ× ×¨×’×™×œ×”', value: 'A' },
            { text: '×œ× ×‘×˜×•×—×” ×©×–×• ×× ×™', value: 'B' }
          ]
        },
        {
          text: '××” ×™×•×ª×¨ ×—×©×•×‘ ×œ×š ×‘×—×‘×¨×•×ª - ×©×ª×”×™×” ×›×™×£ ××• ×©×ª×”×™×” ×××™×ª×™×ª?',
          options: [
            { text: '×›×™×£', value: 'A' },
            { text: '×××™×ª×™×ª', value: 'B' }
          ]
        },
        {
          text: '××ª ×™×•×ª×¨ ×××œ×” ×©× ×•×ª× ×•×ª ×•××—×›×•×ª ×©×™×—×–×™×¨×• ××• ×××œ×” ×©× ×•×ª× ×•×ª ×•×©×•×›×—×•×ª ×©×’× ××’×™×¢ ×œ×”×Ÿ?',
          options: [
            { text: '× ×•×ª× ×ª ×•××—×›×”', value: 'A' },
            { text: '× ×•×ª× ×ª ×•×©×•×›×—×ª', value: 'B' }
          ]
        }
      ],
      boundaries: [
        {
          text: '××ª×™ ×”×’×‘×•×œ ×©×œ×š ×”×›×™ × ×‘×“×§ - ×›×©××™×©×”×• ××‘×§×© ×××š ××©×”×• ×©×œ× ×‘× ×œ×š ××• ×›×©××ª ×‘×¢×¦××š ×œ× ×™×•×“×¢×ª ××” ×”×’×‘×•×œ×•×ª ×©×œ×š?',
          options: [
            { text: '××‘×§×©×™× ××× ×™', value: 'A', next: 'q2a' },
            { text: '×œ× ×™×•×“×¢×ª ××” ×”×’×‘×•×œ×•×ª ×©×œ×™', value: 'B', next: 'q2b' }
          ]
        },
        {
          id: 'q2a',
          text: '××ª ××”×¡×•×’ ×©××•××¨ \'×›×Ÿ\' ×•××– ××ª×—×¨×˜×ª ××• ××”×¡×•×’ ×©××•××¨ \'×œ×\' ×•××– ××¨×’×™×©×” ××©××”?',
          options: [
            { text: '××•××¨×ª ×›×Ÿ ×•××ª×—×¨×˜×ª', value: 'A' },
            { text: '××•××¨×ª ×œ× ×•××¨×’×™×©×” ××©××”', value: 'B' }
          ]
        },
        {
          id: 'q2b',
          text: '××ª ×—×•×©×‘×ª ×©×’×‘×•×œ×•×ª ×”× ×“×‘×¨ ×©××’×œ×™× ×œ×‘×“ ××• ×“×‘×¨ ×©××™×©×”×• ×¦×¨×™×š ×œ×œ××“ ××•×ª×š?',
          options: [
            { text: '××’×œ×™× ×œ×‘×“', value: 'A' },
            { text: '××™×©×”×• ×¦×¨×™×š ×œ×œ××“', value: 'B' }
          ]
        },
        {
          text: '×”×’×‘×•×œ ×”×›×™ ×§×©×” ×œ×š ×œ×©××•×¨ - ××•×œ ×—×‘×¨×•×ª ××•×œ ×”×•×¨×™× ××• ××•×œ ×¢×¦××š?',
          options: [
            { text: '××•×œ ×—×‘×¨×•×ª', value: 'A' },
            { text: '××•×œ ×”×•×¨×™×', value: 'B' },
            { text: '××•×œ ×¢×¦××™', value: 'C' }
          ]
        },
        {
          text: '××” ××¨×’×™×© ×™×•×ª×¨ ×—×–×§ - ×œ×’×œ×•×ª ×’×‘×•×œ ×—×“×© ×©×œ× ×™×“×¢×ª ×©×™×© ×œ×š ××• ×œ×”×¦×œ×™×— ×œ×©××•×¨ ×¢×œ ×’×‘×•×œ ×©×ª××™×“ × ×›×©×œ×ª ×‘×•?',
          options: [
            { text: '×œ×’×œ×•×ª ×’×‘×•×œ ×—×“×©', value: 'A' },
            { text: '×œ×”×¦×œ×™×— ×œ×©××•×¨', value: 'B' }
          ]
        }
      ],
      'inner-voice': [
        {
          text: '×”×§×•×œ ×‘×¨××© ×©×œ×š - ×”×•× ×™×•×ª×¨ ×‘×™×§×•×¨×ª×™ (\'×œ××” ×¢×©×™×ª ×›×›×”?\') ××• ×™×•×ª×¨ ××¤×—×™×“ (\'××” ×× ×–×” ×™×™×›×©×œ?\')?',
          options: [
            { text: '×‘×™×§×•×¨×ª×™', value: 'A', next: 'q2a' },
            { text: '××¤×—×™×“', value: 'B', next: 'q2b' }
          ]
        },
        {
          id: 'q2a',
          text: '×”×‘×™×§×•×¨×ª ×”×¤× ×™××™×ª ×©×œ×š - ×”×™× ×‘×§×•×œ ×©×œ ××™×©×”×• ×©××ª ××›×™×¨×” ××• ×”×™× ×¡×ª× ×§×•×œ ×©×œ×š?',
          options: [
            { text: '×‘×§×•×œ ×©×œ ××™×©×”×•', value: 'A' },
            { text: '×”×§×•×œ ×©×œ×™', value: 'B' }
          ]
        },
        {
          id: 'q2b',
          text: '××ª ×™×•×ª×¨ ××¤×—×“×ª ×××” ×©×™×’×™×“×• ×¢×œ×™×š ××• ×××” ×©××ª ×ª×’×™×“×™ ×œ×¢×¦××š?',
          options: [
            { text: '×××” ×©×™×’×™×“×•', value: 'A' },
            { text: '×××” ×©××’×™×“ ×œ×¢×¦××™', value: 'B' }
          ]
        },
        {
          text: '×ª×“××™×™× ×™ ×©×”×§×•×œ ×”×¤× ×™××™ ×©×œ×š ×”×•× ×“××•×ª - ×”×™× ×™×•×ª×¨ ×“×•××” ×œ×¢×•×¨×›×ª ×“×™×Ÿ ×©××—×¤×©×ª ×˜×¢×•×™×•×ª ××• ×œ××× ×“×•××’× ×™×ª ×©×× ×¡×” ×œ×”×’×Ÿ ×¢×œ×™×š?',
          options: [
            { text: '×¢×•×¨×›×ª ×“×™×Ÿ', value: 'A' },
            { text: '××× ×“×•××’× ×™×ª', value: 'B' }
          ]
        },
        {
          text: '××” ×”×™×™×ª ×¨×•×¦×” ×©×”×§×•×œ ×”×¤× ×™××™ ×©×œ×š ×™×’×™×“ ×œ×š ×™×•×ª×¨ - \'××ª ××¡×¤×™×§ ×˜×•×‘×”\' ××• \'××ª ×™×›×•×œ×” ×œ×”×¨×©×•×ª ×œ×¢×¦××š ×œ×˜×¢×•×ª\'?',
          options: [
            { text: '××ª ××¡×¤×™×§ ×˜×•×‘×”', value: 'A' },
            { text: '××•×ª×¨ ×œ×š ×œ×˜×¢×•×ª', value: 'B' }
          ]
        }
      ]
    };

    const domainData = {
      'body-feeling': { name: '×ª×—×•×©×ª ×’×•×£', emoji: 'ğŸ’ª', subs: ['×©×™× ×” ×•×× ×¨×’×™×”', '×ª×–×•× ×” ×•×œ×—×¥', '×ª× ×•×¢×” ×•××•×˜×™×‘×¦×™×”', '×ª×“××™×ª ×’×•×£'] },
      'digital-life': { name: '×—×™×™× ×“×™×’×™×˜×œ×™×™×', emoji: 'ğŸ“±', subs: ['×–××Ÿ ××¡×š', '×‘×˜×™×—×•×ª ×‘×¨×©×ª', '×”×©×•×•××” ×—×‘×¨×ª×™×ª', '×¤×¨×˜×™×•×ª'] },
      'learning-pressure': { name: '×œ××™×“×” ×‘×œ×—×¥', emoji: 'ğŸ“š', subs: ['× ×™×”×•×œ ×–××Ÿ', '××•×˜×™×‘×¦×™×”', '×œ×—×¥ ××‘×—× ×™×', '×§×©×™×™ ×¨×™×›×•×–'] },
      'social-life': { name: '×—×™×™× ×—×‘×¨×ª×™×™×', emoji: 'ğŸ‘­', subs: ['×—×‘×¨×•×™×•×ª ×—×“×©×•×ª', '×§×•× ×¤×œ×™×§×˜×™×', '×©×™×™×›×•×ª', '×ª×§×©×•×¨×ª'] },
      'daily-choices': { name: '×‘×—×™×¨×•×ª ×™×•×-×™×•××™×•×ª', emoji: 'ğŸ¤”', subs: ['× ×™×”×•×œ ×›×¡×£', '× ×™×”×•×œ ×–××Ÿ', '×¦×¨×™×›×” ××•×“×¢×ª', '×¡×“×¨ ×¢×“×™×¤×•×™×•×ª'] },
      'space-movement': { name: '××¨×—×‘ ×•×ª× ×•×¢×”', emoji: 'ğŸš¶â€â™€ï¸', subs: ['×‘×˜×™×—×•×ª', '× ×’×™×©×•×ª', '××¨×—×‘×™× ×™×¨×•×§×™×', '×ª×—×‘×•×¨×”'] },
      'my-home': { name: '×”×‘×™×ª ×©×œ×™', emoji: 'ğŸ ', subs: ['×¤×¨×˜×™×•×ª', '×¡×‘×™×‘×ª ×œ××™×“×”', '×™×—×¡×™× ×‘×‘×™×ª', '×¡×“×¨ ×•××•×•×™×¨×”'] },
      'living-environment': { name: '×¡×‘×™×‘×” ×—×™×”', emoji: 'ğŸŒ±', subs: ['××™×—×–×•×¨', '×—×™×‘×•×¨ ×œ×˜×‘×¢', '×–×™×”×•×', '×¦×¨×™×›×ª ××©××‘×™×'] },
      'leisure-creativity': { name: '×¤× ××™ ×•×™×¦×™×¨×”', emoji: 'ğŸ¨', subs: ['×’×™×©×” ×œ×ª×—×‘×™×‘×™×', '×–××Ÿ ×¤× ×•×™', '×™×¦×™×¨×”', '×¤×¢×™×œ×•×™×•×ª ×—×‘×¨×ª×™×•×ª'] },
      'looking-forward': { name: '××‘×˜ ×§×“×™××”', emoji: 'ğŸ”®', subs: ['×‘×—×™×¨×ª ××¡×œ×•×œ', '×—×©×©×•×ª', '×›×™×©×•×¨×™× ×—×“×©×™×', '×™×–××•×ª'] }
    };

    function getStepIndicator(current, total) {
      let dots = '';
      for (let i = 1; i <= total; i++) {
        let cls = 'step-dot';
        if (i === current) cls += ' active';
        else if (i < current) cls += ' completed';
        dots += `<div class="${cls}"></div>`;
      }
      return `<div class="step-indicator">${dots}</div>`;
    }

    function transitionStep(html) {
      const container = document.getElementById('journey-step-container');
      container.style.opacity = '0';
      container.style.transform = 'translateY(20px)';
      setTimeout(() => {
        container.innerHTML = html;
        container.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
        container.style.opacity = '1';
        container.style.transform = 'translateY(0)';
        document.getElementById('app-wrapper').scrollTo({ top: 0, behavior: 'smooth' });
      }, 300);
    }

    function getParticipantForQuestion(qIndex) {
      const names = journeyData.names;
      return names[qIndex % names.length];
    }

    function showMainView() {
      document.getElementById('main-content').style.display = 'block';
      document.getElementById('journey-view').style.display = 'none';
    }

    function showJourneyStep1() {
      document.getElementById('main-content').style.display = 'none';
      document.getElementById('journey-view').style.display = 'block';
      journeyData.currentStep = 1;
      renderStep1();
    }

    function renderStep1() {
      const html = `
        ${getStepIndicator(1, 8)}
        <div class="text-center mb-8">
          <div class="text-6xl mb-4">ğŸ‘‹</div>
          <h2 class="text-3xl md:text-4xl font-bold mb-4 gradient-text">××™ ×™×•×¦××ª ×œ××¡×¢?</h2>
          <p class="text-lg" style="color: var(--text-color); opacity: 0.8;">×”×›× ×™×¡×• ××ª ×”×©××•×ª ×©×œ ×”××©×ª×ª×¤×•×ª</p>
        </div>
        <div class="space-y-4 max-w-md mx-auto mb-8">
          <div>
            <label class="block text-sm font-bold mb-2" style="color: var(--text-color);">××©×ª×ª×¤×ª 1 *</label>
            <input type="text" id="name1" class="journey-input" placeholder="×”×©× ×©×œ ××©×ª×ª×¤×ª 1" required>
          </div>
          <div>
            <label class="block text-sm font-bold mb-2" style="color: var(--text-color);">××©×ª×ª×¤×ª 2 *</label>
            <input type="text" id="name2" class="journey-input" placeholder="×”×©× ×©×œ ××©×ª×ª×¤×ª 2" required>
          </div>
          <div>
            <label class="block text-sm font-bold mb-2" style="color: var(--text-color);">××©×ª×ª×¤×ª 3 (×œ× ×—×•×‘×”)</label>
            <input type="text" id="name3" class="journey-input" placeholder="×”×©× ×©×œ ××©×ª×ª×¤×ª 3">
          </div>
        </div>
        <div class="text-center">
          <button onclick="submitNames()" class="pulse-btn text-white text-xl font-bold px-10 py-4 rounded-full shadow-2xl transform hover:scale-105 transition-all duration-300" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
            ×™×•×¦××•×ª ×œ×“×¨×š! ğŸš€
          </button>
        </div>
      `;
      transitionStep(html);
    }

    function submitNames() {
      const n1 = document.getElementById('name1').value.trim();
      const n2 = document.getElementById('name2').value.trim();
      const n3 = document.getElementById('name3').value.trim();
      if (!n1 || !n2) {
        alert('×—×•×‘×” ×œ×”×›× ×™×¡ ×©××•×ª ×œ×©×ª×™ ××©×ª×ª×¤×•×ª ×œ×¤×—×•×ª');
        return;
      }
      journeyData.names = [n1, n2];
      if (n3) journeyData.names.push(n3);

      const namesStr = journeyData.names.join(' ×•');
      const html = `
        ${getStepIndicator(1, 8)}
        <div class="text-center">
          <div class="text-6xl mb-6">âœ¨</div>
          <div class="stem-card rounded-3xl p-10 max-w-xl mx-auto" style="background: var(--surface-color);">
            <h2 class="text-2xl font-bold mb-4 gradient-text">${namesStr}</h2>
            <p class="text-lg mb-6" style="color: var(--text-color);">×™×¦××ª×Ÿ ×œ××¡×¢ ××©×•×ª×£. ×‘××”×œ×š ×”×“×¨×š × ×¦×¢×“ ×™×—×“ ×•×‘×›×œ ×©×œ×‘ ×”×©××œ×” ×ª×¤× ×” ×œ××™×©×”×™ ××—×¨×ª.</p>
            <button onclick="renderStep2()" class="text-white text-lg font-bold px-8 py-4 rounded-full shadow-xl transform hover:scale-105 transition-all duration-300" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
              ×”××©×™×›×• â†’
            </button>
          </div>
        </div>
      `;
      transitionStep(html);
    }

    function renderStep2() {
      journeyData.currentStep = 2;
      journeyData.topicChoices = {};
      let currentPickerIndex = 0;

      function renderPicker() {
        const name = journeyData.names[currentPickerIndex];
        const boxesHtml = topicBoxes.map(box => {
          const alreadyChosen = Object.values(journeyData.topicChoices).includes(box.id);
          const dimClass = alreadyChosen ? 'opacity-40 pointer-events-none' : '';
          return `
            <div class="topic-box stem-card rounded-2xl p-6 text-center ${dimClass}" style="background: var(--surface-color);" onclick="pickTopic('${box.id}')">
              <div class="text-5xl mb-3">${box.emoji}</div>
              <h3 class="text-lg font-bold mb-2" style="color: var(--text-color);">${box.title}</h3>
              <p class="text-sm" style="color: var(--text-color); opacity: 0.7;">"${box.subtitle}"</p>
            </div>
          `;
        }).join('');

        const html = `
          ${getStepIndicator(2, 8)}
          <div class="text-center mb-6">
            <div class="text-5xl mb-4">ğŸ“¦</div>
            <h2 class="text-3xl font-bold mb-3 gradient-text">×‘×—×™×¨×ª ×ª×™×‘×ª × ×•×©×</h2>
            <p class="text-base mb-4" style="color: var(--text-color); opacity: 0.8;">×›×œ ××—×ª ×‘×ª×•×¨×” ×‘×•×—×¨×ª ×ª×™×‘×” ×©××¡×§×¨× ×ª ××•×ª×”. ×œ× ××” ×©×¦×¨×™×š â€“ ××œ× ××” ×©××•×©×š ×¢×›×©×™×•.</p>
            <div class="stem-card rounded-full px-6 py-3 inline-block" style="background: linear-gradient(135deg, rgba(236, 72, 153, 0.15), rgba(139, 92, 246, 0.15));">
              <p class="text-lg font-bold gradient-text">×ª×•×¨ ×©×œ ${name}</p>
            </div>
          </div>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
            ${boxesHtml}
          </div>
        `;
        transitionStep(html);
      }

      window.pickTopic = function(topicId) {
        journeyData.topicChoices[journeyData.names[currentPickerIndex]] = topicId;
        currentPickerIndex++;
        if (currentPickerIndex < journeyData.names.length) {
          renderPicker();
        } else {
          const counts = {};
          Object.values(journeyData.topicChoices).forEach(t => { counts[t] = (counts[t] || 0) + 1; });
          let maxCount = 0; let primary = null;
          for (const [t, c] of Object.entries(counts)) { if (c > maxCount) { maxCount = c; primary = t; } }
          if (!primary) primary = Object.values(journeyData.topicChoices)[0];
          journeyData.primaryTopic = primary;

          const topicObj = topicBoxes.find(b => b.id === primary);
          const html = `
            ${getStepIndicator(2, 8)}
            <div class="text-center">
              <div class="text-6xl mb-6">${topicObj.emoji}</div>
              <div class="stem-card rounded-3xl p-10 max-w-xl mx-auto" style="background: var(--surface-color);">
                <h2 class="text-2xl font-bold mb-4 gradient-text">${topicObj.title}</h2>
                <p class="text-lg mb-6" style="color: var(--text-color);">××”× ×§×•×“×” ×”×–×• × ×ª×—×™×œ ×œ×”×ª×¤×¦×œ ×‘×©××œ×•×ª ×›×“×™ ×œ×”×’×™×¢ ×œ×“×™×•×§ ××©×•×ª×£.</p>
                <button onclick="startQuestions()" class="text-white text-lg font-bold px-8 py-4 rounded-full shadow-xl transform hover:scale-105 transition-all duration-300" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
                  ×‘×•××• × ×ª×—×™×œ! ğŸ¯
                </button>
              </div>
            </div>
          `;
          transitionStep(html);
        }
      };

      renderPicker();
    }

    function startQuestions() {
      journeyData.currentStep = 3;
      journeyData.answers = [];
      journeyData.currentQuestionIndex = 0;
      journeyData.questionPath = [];

      const tree = questionTrees[journeyData.primaryTopic];
      journeyData.questionPath.push(0);
      renderQuestion();
    }

    function renderQuestion() {
      const tree = questionTrees[journeyData.primaryTopic];
      const qIdx = journeyData.questionPath[journeyData.questionPath.length - 1];
      const question = tree[qIdx];
      const name = getParticipantForQuestion(journeyData.currentQuestionIndex);

      const optionsHtml = question.options.map((opt, i) => `
        <div class="answer-btn stem-card rounded-2xl p-5 text-center" style="background: var(--surface-color);" onclick="answerQuestion(${i})">
          <p class="text-lg font-semibold" style="color: var(--text-color);">${opt.text}</p>
        </div>
      `).join('');

      const html = `
        ${getStepIndicator(3, 8)}
        <div class="text-center mb-6">
          <div class="text-5xl mb-4">ğŸ’­</div>
          <div class="stem-card rounded-full px-6 py-3 inline-block mb-4" style="background: linear-gradient(135deg, rgba(236, 72, 153, 0.15), rgba(139, 92, 246, 0.15));">
            <p class="text-lg font-bold gradient-text">×©××œ×” ×œ-${name}</p>
          </div>
          <div class="stem-card rounded-2xl p-8 mb-6" style="background: var(--surface-color);">
            <p class="text-xl leading-relaxed" style="color: var(--text-color);">${question.text}</p>
          </div>
        </div>
        <div class="space-y-4 max-w-lg mx-auto">
          ${optionsHtml}
        </div>
        <div class="text-center mt-6">
          <p class="text-sm" style="color: var(--text-color); opacity: 0.5;">×©××œ×” ${journeyData.currentQuestionIndex + 1}</p>
        </div>
      `;
      transitionStep(html);
    }

    function answerQuestion(optionIndex) {
      const tree = questionTrees[journeyData.primaryTopic];
      const qIdx = journeyData.questionPath[journeyData.questionPath.length - 1];
      const question = tree[qIdx];
      const chosen = question.options[optionIndex];

      journeyData.answers.push({ question: question.text, answer: chosen.text, value: chosen.value });
      journeyData.currentQuestionIndex++;

      if (chosen.next) {
        const nextIdx = tree.findIndex(q => q.id === chosen.next);
        if (nextIdx !== -1) {
          journeyData.questionPath.push(nextIdx);
          renderQuestion();
          return;
        }
      }

      const lastLinearIdx = journeyData.questionPath[journeyData.questionPath.length - 1];
      let nextLinearIdx = -1;
      for (let i = lastLinearIdx + 1; i < tree.length; i++) {
        if (!tree[i].id) { nextLinearIdx = i; break; }
      }

      if (nextLinearIdx !== -1 && journeyData.currentQuestionIndex < 4) {
        journeyData.questionPath.push(nextLinearIdx);
        renderQuestion();
      } else {
        renderStep4();
      }
    }

    function determineDomain() {
      const topic = journeyData.primaryTopic;
      const answers = journeyData.answers.map(a => a.value);

      const mapping = {
        daily: () => {
          if (answers.includes('C') || (answers[0] === 'B' && answers.length > 1 && answers[1] === 'C')) return 'body-feeling';
          if (answers.includes('B') && answers[answers.length - 1] === 'B') return 'living-environment';
          return 'daily-choices';
        },
        identity: () => {
          if (answers[answers.length - 1] === 'B') return 'leisure-creativity';
          return 'looking-forward';
        },
        relationships: () => {
          if (answers[0] === 'A' && answers.some(a => a === 'B')) return 'my-home';
          return 'social-life';
        },
        boundaries: () => {
          if (answers.includes('C')) return 'space-movement';
          if (answers[0] === 'B') return 'learning-pressure';
          return 'social-life';
        },
        'inner-voice': () => {
          if (answers[0] === 'A' && answers.some(a => a === 'A')) return 'digital-life';
          if (answers[0] === 'B') return 'learning-pressure';
          return 'looking-forward';
        }
      };

      return mapping[topic] ? mapping[topic]() : 'daily-choices';
    }

    function renderStep4() {
      journeyData.currentStep = 4;
      const domainId = determineDomain();
      journeyData.domain = domainId;
      const domain = domainData[domainId];

      const html = `
        ${getStepIndicator(4, 8)}
        <div class="text-center">
          <div class="text-7xl mb-6">${domain.emoji}</div>
          <div class="stem-card rounded-3xl p-10 max-w-xl mx-auto" style="background: var(--surface-color);">
            <p class="text-lg mb-4" style="color: var(--text-color);">×›×©××—×‘×¨×™× ××ª ×›×œ ×”×‘×—×™×¨×•×ª ×©×œ×›×Ÿ ×¢×•×œ×” ×›××Ÿ × ×•×©× ××¨×›×–×™:</p>
            <h2 class="text-3xl font-bold mb-4 gradient-text">${domain.name} ${domain.emoji}</h2>
            <p class="text-base mb-6" style="color: var(--text-color); opacity: 0.7;">×–×”×• ××™×§×•×“ ×§×‘×•×¦×ª×™ ×œ× ×ª×™×•×’ ××™×©×™.</p>
            <button onclick="renderStep5()" class="text-white text-lg font-bold px-8 py-4 rounded-full shadow-xl transform hover:scale-105 transition-all duration-300" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
              ×‘×•××• × ×“×™×™×§ ×¢×•×“ ğŸ”
            </button>
          </div>
        </div>
      `;
      transitionStep(html);
    }

    function renderStep5() {
      journeyData.currentStep = 5;
      const domain = domainData[journeyData.domain];
      const name = journeyData.names[journeyData.names.length - 1];

      const subsHtml = domain.subs.map((sub, i) => `
        <div class="subdomain-btn stem-card rounded-2xl p-5 text-center" style="background: var(--surface-color);" onclick="pickSubdomain(${i})">
          <p class="text-lg font-semibold" style="color: var(--text-color);">${sub}</p>
        </div>
      `).join('');

      const html = `
        ${getStepIndicator(5, 8)}
        <div class="text-center mb-6">
          <div class="text-5xl mb-4">${domain.emoji}</div>
          <h2 class="text-2xl font-bold mb-3 gradient-text">${domain.name}</h2>
          <div class="stem-card rounded-full px-6 py-3 inline-block mb-4" style="background: linear-gradient(135deg, rgba(236, 72, 153, 0.15), rgba(139, 92, 246, 0.15));">
            <p class="text-lg font-bold gradient-text">×©××œ×” ×œ-${name}</p>
          </div>
          <p class="text-lg mb-6" style="color: var(--text-color);">×‘×ª×•×š ×”×ª×—×•× ×”×–×” ××” ×”×›×™ ××“×•×™×§ ×œ××§×•× ×©××ª×Ÿ × ××¦××•×ª ×‘×• ×¢×›×©×™×•?</p>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 max-w-lg mx-auto">
          ${subsHtml}
        </div>
      `;
      transitionStep(html);
    }

    function pickSubdomain(index) {
      const domain = domainData[journeyData.domain];
      journeyData.subDomain = domain.subs[index];

      const cards = document.querySelectorAll('.subdomain-btn');
      cards.forEach((c, i) => {
        if (i === index) c.classList.add('selected');
        else c.classList.remove('selected');
      });

      setTimeout(() => renderStep6(), 600);
    }

    function renderStep6() {
      journeyData.currentStep = 6;
      const options = [
        { emoji: 'ğŸ‘€', text: '×œ×©×™× ×œ×‘ ×œ××©×”×•', value: 'notice' },
        { emoji: 'ğŸ’¬', text: '×œ×“×‘×¨ ×¢×œ×™×• ×™×•×ª×¨', value: 'talk' },
        { emoji: 'ğŸ‘£', text: '×œ× ×¡×•×ª ×¦×¢×“ ×§×˜×Ÿ', value: 'step' }
      ];

      const optionsHtml = options.map(opt => `
        <div class="answer-btn stem-card rounded-2xl p-6 text-center" style="background: var(--surface-color);" onclick="pickDecision('${opt.value}', '${opt.emoji} ${opt.text}')">
          <div class="text-4xl mb-3">${opt.emoji}</div>
          <p class="text-lg font-semibold" style="color: var(--text-color);">${opt.text}</p>
        </div>
      `).join('');

      const html = `
        ${getStepIndicator(6, 8)}
        <div class="text-center mb-6">
          <div class="text-5xl mb-4">ğŸ¤</div>
          <h2 class="text-2xl font-bold mb-4 gradient-text">×”×—×œ×˜×” ××©×•×ª×¤×ª</h2>
          <p class="text-lg mb-6" style="color: var(--text-color);">××ª×•×š ×›×œ ××” ×©×¢×œ×” ×›××Ÿ ××” × ×‘×—×¨ ×œ×§×—×ª ××™×ª× ×• ×”×œ××”?</p>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 max-w-2xl mx-auto">
          ${optionsHtml}
        </div>
      `;
      transitionStep(html);
    }

    function pickDecision(value, label) {
      journeyData.decision = label;

      const html = `
        ${getStepIndicator(6, 8)}
        <div class="text-center">
          <div class="text-6xl mb-6">ğŸ’«</div>
          <div class="stem-card rounded-3xl p-10 max-w-xl mx-auto" style="background: var(--surface-color);">
            <h2 class="text-2xl font-bold mb-4 gradient-text">×”×”×—×œ×˜×” ×”××©×•×ª×¤×ª ×©×œ×›×Ÿ</h2>
            <p class="text-xl mb-6" style="color: var(--text-color);">${label}</p>
            <button onclick="renderStep7()" class="text-white text-lg font-bold px-8 py-4 rounded-full shadow-xl transform hover:scale-105 transition-all duration-300" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
              ×”××©×™×›×• â†’
            </button>
          </div>
        </div>
      `;
      transitionStep(html);
    }

    function renderStep7() {
      journeyData.currentStep = 7;
      const html = `
        ${getStepIndicator(7, 8)}
        <div class="text-center">
          <div class="text-6xl mb-6">ğŸŒŸ</div>
          <div class="stem-card rounded-3xl p-10 max-w-xl mx-auto" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
            <div class="text-white">
              <p class="text-xl mb-6 leading-relaxed">×œ× ×¤×ª×¨×ª×Ÿ ×”×›×•×œ. ××‘×œ ×‘×—×¨×ª×Ÿ ×œ×¦×¢×•×“ ×™×—×“ ×œ×“×™×™×§ ×•×œ×§×‘×œ ×”×—×œ×˜×”.</p>
              <button onclick="renderStep8()" class="bg-white text-lg font-bold px-10 py-4 rounded-full shadow-xl transform hover:scale-105 transition-all duration-300" style="color: var(--primary-color);">
                ×”×“×¨×š ×©×œ× ×• â€“ ×™×—×“ ğŸ’œ
              </button>
            </div>
          </div>
        </div>
      `;
      transitionStep(html);
    }

    function renderStep8() {
      journeyData.currentStep = 8;
      const domain = domainData[journeyData.domain];
      const topicObj = topicBoxes.find(b => b.id === journeyData.primaryTopic);
      const namesStr = journeyData.names.join(' ×•');

      const html = `
        ${getStepIndicator(8, 8)}
        <div class="text-center mb-6">
          <div class="text-6xl mb-4">ğŸ“„</div>
          <h2 class="text-3xl font-bold mb-2 gradient-text">×”×“×¨×š ×©×œ× ×• â€“ ×™×—×“</h2>
          <p class="text-base mb-6" style="color: var(--text-color); opacity: 0.7;">×”×¡×™×›×•× ×©×œ×›×Ÿ ××•×›×Ÿ!</p>
        </div>
        <div class="stem-card rounded-3xl p-8 mb-6" style="background: var(--surface-color);">
          <div class="space-y-4 text-center">
            <p class="text-lg" style="color: var(--text-color);"><strong>××©×ª×ª×¤×•×ª:</strong> ${namesStr}</p>
            <p class="text-lg" style="color: var(--text-color);"><strong>×ª×™×‘×ª × ×•×©×:</strong> ${topicObj.emoji} ${topicObj.title}</p>
            <p class="text-lg" style="color: var(--text-color);"><strong>×ª×—×•×:</strong> ${domain.emoji} ${domain.name}</p>
            <p class="text-lg" style="color: var(--text-color);"><strong>×ª×ª-×ª×—×•×:</strong> ${journeyData.subDomain}</p>
            <p class="text-lg" style="color: var(--text-color);"><strong>×”×—×œ×˜×”:</strong> ${journeyData.decision}</p>
          </div>
        </div>
        <div class="text-center">
          <button id="generate-pdf-btn" onclick="generatePDF()" class="pulse-btn text-white text-xl font-bold px-10 py-4 rounded-full shadow-2xl transform hover:scale-105 transition-all duration-300" style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));">
            ×”×•×¨×™×“×• ××ª ×”-PDF ğŸ“¥
          </button>
          <p id="pdf-loading" class="mt-4 text-base hidden" style="color: var(--text-color); opacity: 0.7;">â³ ××›×™× ×•×ª ××ª ×”-PDF ×©×œ×›×Ÿ...</p>
        </div>
      `;
      transitionStep(html);
    }

    let logoDataUrl = null;
    (function preloadLogo() {
      const img = new Image();
      img.crossOrigin = 'anonymous';
      img.onload = function() {
        const c = document.createElement('canvas');
        c.width = img.width; c.height = img.height;
        c.getContext('2d').drawImage(img, 0, 0);
        try { logoDataUrl = c.toDataURL('image/png'); } catch(e) {}
      };
      img.src = '/favicon.png';
    })();

    async function generatePDF() {
      const btn = document.getElementById('generate-pdf-btn');
      const loading = document.getElementById('pdf-loading');
      btn.style.display = 'none';
      loading.classList.remove('hidden');

      const domain = domainData[journeyData.domain];
      const topicObj = topicBoxes.find(b => b.id === journeyData.primaryTopic);
      const namesStr = journeyData.names.join(' ×•');
      const renderArea = document.getElementById('pdf-render-area');
      const logoSrc = logoDataUrl || '/favicon.png';

      const pages = [];

      pages.push(`
        <div class="pdf-page" style="display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
          <div class="pdf-gradient-bar"></div>
          <div style="margin-bottom: 40px;">
            <img src="${logoSrc}" style="width: 80px; height: 80px; border-radius: 50%; margin: 0 auto 20px;" onerror="this.style.display='none'">
          </div>
          <h1 style="font-size: 42px; font-weight: 700; background: linear-gradient(135deg, #ec4899, #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 16px;">×”×“×¨×š ×©×œ× ×• â€“ ×™×—×“</h1>
          <p style="font-size: 22px; color: #6b7280; margin-bottom: 60px;">××¡×¢ ××©×•×ª×£ ×©×œ × ×©×™× ×¤×•×¨×¦×•×ª ×“×¨×š</p>
          <div style="background: linear-gradient(135deg, rgba(236,72,153,0.1), rgba(139,92,246,0.1)); border-radius: 20px; padding: 30px 50px; margin-bottom: 40px;">
            <p style="font-size: 28px; font-weight: 600; color: #1f2937;">${namesStr}</p>
          </div>
          <p style="font-size: 16px; color: #9ca3af; margin-top: auto; padding-top: 40px;">×ª×•×›× ×™×ª ×¤×•×¨×¦×•×ª ×“×¨×š Â© 2026</p>
          <div class="pdf-bottom-bar"></div>
        </div>
      `);

      pages.push(`
        <div class="pdf-page">
          <div class="pdf-gradient-bar"></div>
          <div style="padding-top: 40px;">
            <div style="text-align: center; margin-bottom: 50px;">
              <div style="font-size: 48px; margin-bottom: 16px;">ğŸ¤</div>
              <h2 style="font-size: 32px; font-weight: 700; color: #ec4899; margin-bottom: 8px;">× ×§×•×“×ª ×”××¤×’×©</h2>
              <div style="width: 80px; height: 3px; background: linear-gradient(90deg, #ec4899, #8b5cf6); margin: 0 auto;"></div>
            </div>
            <div style="background: #fdf4ff; border-radius: 16px; padding: 30px; margin-bottom: 30px;">
              <h3 style="font-size: 20px; font-weight: 600; color: #1f2937; margin-bottom: 16px;">×œ××” ×™×¦×× ×• ×œ××¡×¢ ××©×•×ª×£?</h3>
              <p style="font-size: 18px; color: #4b5563; line-height: 1.8;">×›×™ ×™×© ×“×‘×¨×™× ×©××™ ××¤×©×¨ ×œ×’×œ×•×ª ×œ×‘×“. ×›×™ ×›×©×¦×•×¢×“×•×ª ×™×—×“ ×¨×•××™× ×™×•×ª×¨ ×¨×—×•×§. ×›×™ ×”×©×™×— ×‘×™×Ÿ × ×©×™× ×”×•× ×›×•×— ×©××©× ×” ×¢×•×œ××•×ª.</p>
            </div>
            <div style="background: white; border: 2px solid #ec4899; border-radius: 16px; padding: 30px; text-align: center;">
              <p style="font-size: 16px; color: #9ca3af; margin-bottom: 8px;">×”×ª×™×‘×” ×©× ×‘×—×¨×”</p>
              <p style="font-size: 26px; font-weight: 700; color: #1f2937;">${topicObj.emoji} ${topicObj.title}</p>
              <p style="font-size: 18px; color: #6b7280; margin-top: 8px;">"${topicObj.subtitle}"</p>
            </div>
          </div>
          <div class="pdf-bottom-bar"></div>
        </div>
      `);

      const answersHtml = journeyData.answers.map((a, i) => `
        <div style="background: ${i % 2 === 0 ? '#fdf4ff' : '#f5f3ff'}; border-radius: 12px; padding: 16px 20px; margin-bottom: 12px;">
          <p style="font-size: 15px; color: #9ca3af; margin-bottom: 4px;">×©××œ×” ${i + 1}</p>
          <p style="font-size: 17px; color: #1f2937; margin-bottom: 6px;">${a.question}</p>
          <p style="font-size: 17px; font-weight: 600; color: #ec4899;">â† ${a.answer}</p>
        </div>
      `).join('');

      pages.push(`
        <div class="pdf-page">
          <div class="pdf-gradient-bar"></div>
          <div style="padding-top: 40px;">
            <div style="text-align: center; margin-bottom: 40px;">
              <div style="font-size: 48px; margin-bottom: 16px;">ğŸ›¤ï¸</div>
              <h2 style="font-size: 32px; font-weight: 700; color: #8b5cf6; margin-bottom: 8px;">×”×“×¨×š ×©×¢×‘×¨× ×•</h2>
              <div style="width: 80px; height: 3px; background: linear-gradient(90deg, #8b5cf6, #ec4899); margin: 0 auto;"></div>
            </div>
            <p style="font-size: 18px; color: #4b5563; text-align: center; margin-bottom: 30px; line-height: 1.6;">×¦×¢×“× ×• ×™×—×“ ×“×¨×š ×©××œ×•×ª ×©×’×¨××• ×œ× ×• ×œ×—×©×•×‘ ×œ×”×–×“×”×•×ª ×•×œ×“×™×™×§. ×”×§×©×‘× ×• ××—×ª ×œ×©× ×™×™×” ×•××¦×× ×• ××ª ×”××§×•× ×©×‘×• ×›×•×œ× ×• × ×¤×’×©×•×ª.</p>
            ${answersHtml}
          </div>
          <div class="pdf-bottom-bar"></div>
        </div>
      `);

      pages.push(`
        <div class="pdf-page" style="display: flex; flex-direction: column;">
          <div class="pdf-gradient-bar"></div>
          <div style="padding-top: 60px; flex: 1; display: flex; flex-direction: column; justify-content: center;">
            <div style="text-align: center; margin-bottom: 50px;">
              <div style="font-size: 48px; margin-bottom: 16px;">ğŸ”</div>
              <h2 style="font-size: 32px; font-weight: 700; color: #ec4899; margin-bottom: 8px;">×”×“×™×•×§ ×©×”×’×¢× ×• ××œ×™×•</h2>
              <div style="width: 80px; height: 3px; background: linear-gradient(90deg, #ec4899, #8b5cf6); margin: 0 auto;"></div>
            </div>
            <div style="background: linear-gradient(135deg, rgba(236,72,153,0.08), rgba(139,92,246,0.08)); border-radius: 24px; padding: 50px; text-align: center; margin-bottom: 30px;">
              <div style="font-size: 64px; margin-bottom: 20px;">${domain.emoji}</div>
              <p style="font-size: 16px; color: #9ca3af; margin-bottom: 8px;">×”×ª×—×•× ×”××¨×›×–×™</p>
              <p style="font-size: 30px; font-weight: 700; color: #1f2937; margin-bottom: 24px;">${domain.name}</p>
              <div style="width: 60px; height: 2px; background: #ec4899; margin: 0 auto 24px;"></div>
              <p style="font-size: 16px; color: #9ca3af; margin-bottom: 8px;">×ª×ª-×ª×—×•×</p>
              <p style="font-size: 24px; font-weight: 600; color: #8b5cf6;">${journeyData.subDomain}</p>
            </div>
            <p style="font-size: 18px; color: #6b7280; text-align: center; line-height: 1.6;">×–×”×• ××™×§×•×“ ×§×‘×•×¦×ª×™ ×©× ×•×œ×“ ××ª×•×š ×©×™×— ×•×”×§×©×‘×” ×”×“×“×™×ª. ×œ× ×ª×™×•×’ ××™×©×™ ××œ× × ×§×•×“×ª ××•×¦× ××©×•×ª×¤×ª ×œ×”××©×š ×”×“×¨×š.</p>
          </div>
          <div class="pdf-bottom-bar"></div>
        </div>
      `);

      pages.push(`
        <div class="pdf-page" style="display: flex; flex-direction: column;">
          <div class="pdf-gradient-bar"></div>
          <div style="padding-top: 60px; flex: 1; display: flex; flex-direction: column; justify-content: center;">
            <div style="text-align: center; margin-bottom: 50px;">
              <div style="font-size: 48px; margin-bottom: 16px;">ğŸ’«</div>
              <h2 style="font-size: 32px; font-weight: 700; color: #8b5cf6; margin-bottom: 8px;">×”×”×—×œ×˜×”</h2>
              <div style="width: 80px; height: 3px; background: linear-gradient(90deg, #8b5cf6, #ec4899); margin: 0 auto;"></div>
            </div>
            <div style="background: white; border: 3px solid #ec4899; border-radius: 24px; padding: 50px; text-align: center; margin-bottom: 40px;">
              <p style="font-size: 18px; color: #9ca3af; margin-bottom: 16px;">×”×”×—×œ×˜×” ×”××©×•×ª×¤×ª ×©×œ× ×•</p>
              <p style="font-size: 28px; font-weight: 700; color: #1f2937;">${journeyData.decision}</p>
            </div>
            <div style="background: #fdf4ff; border-radius: 16px; padding: 30px; text-align: center;">
              <p style="font-size: 18px; color: #4b5563; line-height: 1.8;">×œ×¤×¢××™× ×”×”×—×œ×˜×” ×”×›×™ ×—×©×•×‘×” ×”×™× ×œ× ××” ×¢×•×©×™× ××œ× ××” ×‘×•×—×¨×™× ×œ×©×™× ×œ×‘ ××œ×™×•. ×–×” ×”×©×œ×‘ ×©×‘×• ××ª×—×™×œ ×©×™× ×•×™ ×××™×ª×™ â€“ ×œ× ×‘×ª×›× ×•×Ÿ ××•×©×œ× ××œ× ×‘×¦×¢×“ ×¨××©×•×Ÿ ×™×—×“.</p>
            </div>
          </div>
          <div class="pdf-bottom-bar"></div>
        </div>
      `);

      pages.push(`
        <div class="pdf-page" style="display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;">
          <div class="pdf-gradient-bar"></div>
          <div style="max-width: 500px;">
            <div style="font-size: 48px; margin-bottom: 30px;">âœ¨</div>
            <h2 style="font-size: 32px; font-weight: 700; background: linear-gradient(135deg, #ec4899, #8b5cf6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 30px;">×”××¡×¢ ×”×•× ×”×”×ª×—×œ×”</h2>
            <p style="font-size: 20px; color: #4b5563; line-height: 1.8; margin-bottom: 40px;">×× ×”×™×’×•×ª ×××™×ª×™×ª ×œ× ××ª×—×™×œ×” ××œ×“×¢×ª ×”×›×œ. ×”×™× ××ª×—×™×œ×” ××”×¨×’×¢ ×©×‘×• ×‘×•×—×¨×™× ×œ×¦×¢×•×“ ×™×—×“ ×œ×©××•×œ ×©××œ×•×ª ×××™×¦×•×ª ×•×œ×”×§×©×™×‘ ×‘×××ª.</p>
            <p style="font-size: 20px; color: #4b5563; line-height: 1.8; margin-bottom: 40px;">×¢×©×™×ª×Ÿ ××ª ×”×¦×¢×“ ×”×–×” ×”×™×•×. ×‘×™×—×“.</p>
            <div style="background: linear-gradient(135deg, #ec4899, #8b5cf6); border-radius: 16px; padding: 24px 40px; margin-bottom: 50px;">
              <p style="font-size: 22px; font-weight: 600; color: white;">×”××©×™×›×• ×œ×¤×¨×•×¥ ×“×¨×š ğŸ’œ</p>
            </div>
            <img src="${logoSrc}" style="width: 60px; height: 60px; border-radius: 50%; margin: 0 auto 12px;" onerror="this.style.display='none'">
            <p style="font-size: 14px; color: #9ca3af;">×ª×•×›× ×™×ª ×¤×•×¨×¦×•×ª ×“×¨×š Â© 2026</p>
          </div>
          <div class="pdf-bottom-bar"></div>
        </div>
      `);

      try {
        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF('p', 'mm', 'a4');
        const pdfWidth = 210;
        const pdfHeight = 297;

        for (let i = 0; i < pages.length; i++) {
          renderArea.innerHTML = pages[i];
          const pageEl = renderArea.firstElementChild;

          await new Promise(r => setTimeout(r, 200));

          const canvas = await html2canvas(pageEl, {
            scale: 2,
            useCORS: true,
            allowTaint: true,
            backgroundColor: '#ffffff',
            width: 794,
            height: 1123
          });

          const imgData = canvas.toDataURL('image/jpeg', 0.95);
          if (i > 0) pdf.addPage();
          pdf.addImage(imgData, 'JPEG', 0, 0, pdfWidth, pdfHeight);
        }

        renderArea.innerHTML = '';
        pdf.save('×”×“×¨×š-×©×œ× ×•-×™×—×“.pdf');
      } catch (err) {
        console.error('PDF generation error:', err);
        alert('××™×¨×¢×” ×©×’×™××” ×‘×™×¦×™×¨×ª ×”-PDF. × ×¡×• ×©×•×‘.');
      }

      btn.style.display = 'inline-block';
      loading.classList.add('hidden');
    }

    function updateCSSVariables(cfg) {
      document.documentElement.style.setProperty('--primary-color', cfg.primary_color || defaultConfig.primary_color);
      document.documentElement.style.setProperty('--secondary-color', cfg.secondary_color || defaultConfig.secondary_color);
      document.documentElement.style.setProperty('--bg-color', cfg.background_color || defaultConfig.background_color);
      document.documentElement.style.setProperty('--text-color', cfg.text_color || defaultConfig.text_color);
      document.documentElement.style.setProperty('--surface-color', cfg.surface_color || defaultConfig.surface_color);
    }

    async function onConfigChange(cfg) {
      config = { ...defaultConfig, ...cfg };
      updateCSSVariables(config);

      const fontFamily = config.font_family || defaultConfig.font_family;
      document.querySelectorAll('*').forEach(el => {
        if (el.style) el.style.fontFamily = `'${fontFamily}', sans-serif`;
      });

      const baseSize = config.font_size || defaultConfig.font_size;
      document.documentElement.style.fontSize = `${baseSize}px`;

      const mainTitle = document.getElementById('main-title');
      if (mainTitle) mainTitle.textContent = config.main_title || defaultConfig.main_title;

      const ctaButton = document.getElementById('cta-button');
      if (ctaButton) {
        ctaButton.textContent = config.button_text || defaultConfig.button_text;
        ctaButton.style.background = `linear-gradient(135deg, ${config.primary_color || defaultConfig.primary_color}, ${config.secondary_color || defaultConfig.secondary_color})`;
      }
    }

    function mapToCapabilities(cfg) {
      return {
        recolorables: [
          { get: () => cfg.background_color || defaultConfig.background_color, set: (value) => { config.background_color = value; window.elementSdk.setConfig({ background_color: value }); } },
          { get: () => cfg.surface_color || defaultConfig.surface_color, set: (value) => { config.surface_color = value; window.elementSdk.setConfig({ surface_color: value }); } },
          { get: () => cfg.text_color || defaultConfig.text_color, set: (value) => { config.text_color = value; window.elementSdk.setConfig({ text_color: value }); } },
          { get: () => cfg.primary_color || defaultConfig.primary_color, set: (value) => { config.primary_color = value; window.elementSdk.setConfig({ primary_color: value }); } },
          { get: () => cfg.secondary_color || defaultConfig.secondary_color, set: (value) => { config.secondary_color = value; window.elementSdk.setConfig({ secondary_color: value }); } }
        ],
        borderables: [],
        fontEditable: { get: () => cfg.font_family || defaultConfig.font_family, set: (value) => { config.font_family = value; window.elementSdk.setConfig({ font_family: value }); } },
        fontSizeable: { get: () => cfg.font_size || defaultConfig.font_size, set: (value) => { config.font_size = value; window.elementSdk.setConfig({ font_size: value }); } }
      };
    }

    function mapToEditPanelValues(cfg) {
      return new Map([
        ['main_title', cfg.main_title || defaultConfig.main_title],
        ['button_text', cfg.button_text || defaultConfig.button_text]
      ]);
    }

    if (window.elementSdk) {
      window.elementSdk.init({ defaultConfig, onConfigChange, mapToCapabilities, mapToEditPanelValues });
    }

    document.getElementById('cta-button').addEventListener('click', () => {
      showJourneyStep1();
      document.getElementById('app-wrapper').scrollTo({ top: 0, behavior: 'smooth' });
    });
  </script>
 </body>
</html>
