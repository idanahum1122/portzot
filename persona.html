<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<title>×¤×•×¨×¦×•×ª ×“×¨×š â€“ ×‘× ×™×™×ª ×¤×¨×¡×•× ×”</title>

<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600;700&family=Assistant:wght@400;600&display=swap" rel="stylesheet">

<style>
body {
    font-family: 'Assistant', sans-serif;
    direction: rtl;
    margin: 0;
    background: #f3f4f6;
    padding: 20px;
}

#formArea {
    max-width: 850px;
    margin: 0 auto;
    background: white;
    padding: 40px;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

h1 { color: #e91e63; font-family: 'Rubik'; text-align: center; }
h2 { color: #00a7b5; border-bottom: 2px solid #eee; padding-bottom: 5px; margin-top: 30px; }

label { display: block; font-weight: 600; margin-bottom: 8px; margin-top: 15px; }

input[type="text"], textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 6px;
    font-size: 16px;
    box-sizing: border-box;
}

.checkbox-list {
    background: #f9f9f9;
    padding: 15px;
    border-radius: 8px;
    margin-top: 5px;
}

.checkbox-list label {
    font-weight: normal;
    display: block;
    cursor: pointer;
    margin: 5px 0;
}

button {
    background: linear-gradient(90deg, #e91e63, #00a7b5);
    color: white;
    border: none;
    padding: 18px;
    font-size: 20px;
    border-radius: 50px;
    cursor: pointer;
    font-weight: 700;
    width: 100%;
    margin-top: 30px;
}

#summaryArea { display: none; }

.final-wrapper {
    width: 210mm;
    min-height: 297mm;
    padding: 15mm;
    box-sizing: border-box;
    background: white;
}

.final-doc {
    display: table;
    width: 100%;
}

.text-side {
    display: table-cell;
    width: 65%;
    vertical-align: top;
    padding: 20px;
}

.image-side {
    display: table-cell;
    width: 35%;
    vertical-align: bottom;
    text-align: center;
    padding: 20px;
}

.image-side img {
    max-width: 100%;
    height: auto;
}
</style>
</head>

<body>

<div id="formArea">
<h1>×‘× ×™×™×ª ×¤×¨×¡×•× ×” â€“ ×¤×•×¨×¦×•×ª ×“×¨×š ğŸ€</h1>

<div style="background: #fff0f5; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
<label>×©××•×ª ×—×‘×¨×•×ª ×”×¦×•×•×ª:</label>
<input type="text" id="teamNames">
</div>

<h2>×—×œ×§ ×' â€“ ××™ ×”×™×?</h2>
<div style="display:flex; gap:10px;">
<div style="flex:2;">
<label>×©× ×”×¤×¨×¡×•× ×”:</label>
<input type="text" id="name">
</div>
<div style="flex:1;">
<label>×’×™×œ:</label>
<input type="text" id="age">
</div>
</div>

<label>××” ×××¤×™×™×Ÿ ××ª ×©×’×¨×ª ×”×—×™×™× ×©×œ×”?</label>
<div class="checkbox-list">
<label><input type="checkbox" class="routine" value="×ª×œ××™×“×” ×©××ª××§×“×ª ×‘×¢×™×§×¨ ×‘×œ×™××•×“×™×"> ×ª×œ××™×“×” ×©××ª××§×“×ª ×‘×¢×™×§×¨ ×‘×œ×™××•×“×™×</label>
<label><input type="checkbox" class="routine" value="××©×œ×‘×ª ×œ×™××•×“×™× ×¢× ×—×•×’×™× / ××™××•× ×™×"> ××©×œ×‘×ª ×œ×™××•×“×™× ×¢× ×—×•×’×™× / ××™××•× ×™×</label>
<label><input type="checkbox" class="routine" value="×¤×¢×™×œ×” ×‘×ª× ×•×¢×ª × ×•×¢×¨ / ××¡×’×¨×ª ×—×‘×¨×ª×™×ª"> ×¤×¢×™×œ×” ×‘×ª× ×•×¢×ª × ×•×¢×¨ / ××¡×’×¨×ª ×—×‘×¨×ª×™×ª</label>
<label><input type="checkbox" class="routine" value="×¢×•×‘×“×ª ××—×¨×™ ×©×¢×•×ª ×”×œ×™××•×“×™×"> ×¢×•×‘×“×ª ××—×¨×™ ×©×¢×•×ª ×”×œ×™××•×“×™×</label>
<label><input type="checkbox" class="routine" value="×œ×•×§×—×ª ××—×¨×™×•×ª ×‘×‘×™×ª (××—×™× / ××˜×œ×•×ª ×§×‘×•×¢×•×ª)"> ×œ×•×§×—×ª ××—×¨×™×•×ª ×‘×‘×™×ª (××—×™× / ××˜×œ×•×ª ×§×‘×•×¢×•×ª)</label>
<div style="display:flex; align-items:center; gap:5px; margin-top:5px;">
<span>××—×¨:</span>
<input type="text" id="routineOther" style="margin:0; height:30px;">
</div>
</div>

<label>×›×š × ×¨××™×ª ×”×©×’×¨×” ×©×œ×” ×‘×§×¦×¨×”:</label>
<textarea id="routineText"></textarea>

<h2>×—×œ×§ ×‘' â€“ ×”×¡×™×˜×•××¦×™×” ×©×‘×” ××•×¤×™×¢×” ×”×‘×¢×™×”</h2>
<label>××™×¤×” ×”×™× × ××¦××ª ×¨×•×‘ ×”×™×•×?</label>
<div class="checkbox-list">
<label><input type="checkbox" class="location" value="×‘×‘×™×ª ×”×¡×¤×¨"> ×‘×‘×™×ª ×”×¡×¤×¨</label>
<label><input type="checkbox" class="location" value="×‘×‘×™×ª"> ×‘×‘×™×ª</label>
<label><input type="checkbox" class="location" value="×‘×ª×—×‘×•×¨×” ×¦×™×‘×•×¨×™×ª"> ×‘×ª×—×‘×•×¨×” ×¦×™×‘×•×¨×™×ª</label>
<label><input type="checkbox" class="location" value="×‘××™××•×Ÿ / ×—×•×’"> ×‘××™××•×Ÿ / ×—×•×’</label>
<label><input type="checkbox" class="location" value="×¢× ×—×‘×¨×™×"> ×¢× ×—×‘×¨×™×</label>
<div style="display:flex; align-items:center; gap:5px; margin-top:5px;">
<span>××—×¨:</span>
<input type="text" id="locationOther" style="margin:0; height:30px;">
</div>
</div>

<label>××ª×™ ×”×‘×¢×™×” ××•×¤×™×¢×”? (×–××Ÿ + ××§×•× + ××¦×‘)</label>
<textarea id="moment"></textarea>

<label>××” ×§×•×¨×” ×‘×¤×•×¢×œ ×‘××•×ª×• ×¨×’×¢? (×ª×™××•×¨ ×”×ª× ×”×’×•×ª×™)</label>
<textarea id="action"></textarea>

<h2>×—×œ×§ ×’' â€“ ×¢×•××§ ×¨×’×©×™ ×•×ª×¤×§×•×“×™</h2>
<label>××” ×”×™× ××¨×’×™×©×” ×‘×¡×™×˜×•××¦×™×” ×”×–×•?</label>
<textarea id="emotion"></textarea>

<label>××™×š ×–×” ××©×¤×™×¢ ×¢×œ×™×”?</label>
<div class="checkbox-list" style="display:flex; flex-wrap:wrap; gap:15px;">
<label><input type="checkbox" class="impactType" value="×œ×™××•×“×™×ª"> ×œ×™××•×“×™×ª</label>
<label><input type="checkbox" class="impactType" value="×—×‘×¨×ª×™×ª"> ×—×‘×¨×ª×™×ª</label>
<label><input type="checkbox" class="impactType" value="×¨×’×©×™×ª"> ×¨×’×©×™×ª</label>
<label><input type="checkbox" class="impactType" value="× ×™×”×•×œ ×–××Ÿ"> × ×™×”×•×œ ×–××Ÿ</label>
<div style="display:flex; align-items:center; gap:5px;">
<span>××—×¨:</span>
<input type="text" id="impactOther" style="margin:0; width:150px; height:30px;">
</div>
</div>

<label>×”×¡×‘×¨ ×§×¦×¨ ×¢×œ ×”×”×©×¤×¢×”:</label>
<textarea id="impactText"></textarea>

<h2>×—×œ×§ ×“' â€“ × ×™×¡×•×— ×™×–××™ ××“×•×™×§</h2>
<label>×¦×™×˜×•×˜ ×©××™×™×¦×’ ××•×ª×”:</label>
<input type="text" id="quote">

<label>××©×¤×˜ ×”×‘×¢×™×”:</label>
<div style="background:#f0f0f0; padding:15px; border-radius:8px;">
× ×¢×¨×•×ª ×‘×’×™×œ <input type="text" id="pAge" style="width:50px; margin:0;"> ××©×¨ <input type="text" id="pWho" style="width:200px; margin:0;"> <br><br>
××ª×§×©×•×ª ×‘ <input type="text" id="pDifficulty" style="width:200px; margin:0;"> ×›××©×¨ <input type="text" id="pWhen" style="width:200px; margin:0;">.
</div>

<button onclick="generatePDF()">ğŸ€ ×”×•×¨×“×ª PDF</button>
</div>

<div id="summaryArea"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<script>
function getValues(className, otherId) {
    let vals = Array.from(document.querySelectorAll('.' + className + ':checked')).map(cb => cb.value);
    let other = document.getElementById(otherId).value;
    if (other) vals.push(other);
    return vals.join(', ');
}

function generatePDF() {

    const team = document.getElementById('teamNames').value;
    const name = document.getElementById('name').value;
    const age = document.getElementById('age').value;
    const routine = getValues('routine', 'routineOther');
    const routineText = document.getElementById('routineText').value;
    const location = getValues('location', 'locationOther');
    const moment = document.getElementById('moment').value;
    const action = document.getElementById('action').value;
    const emotion = document.getElementById('emotion').value;
    const impactType = getValues('impactType', 'impactOther');
    const impactText = document.getElementById('impactText').value;
    const quote = document.getElementById('quote').value;

    const problemSentence = `× ×¢×¨×•×ª ×‘×’×™×œ ${document.getElementById('pAge').value} ××©×¨ ${document.getElementById('pWho').value} ××ª×§×©×•×ª ×‘-${document.getElementById('pDifficulty').value} ×›××©×¨ ${document.getElementById('pWhen').value}.`;

    const summary = document.getElementById('summaryArea');

    summary.innerHTML = `
    <div class="final-wrapper">
        <div class="final-doc">
            <div class="text-side">
                <h2>×”×’×“×¨×ª ×”×¤×¨×¡×•× ×” ×©×œ: ${team}</h2>
                <p><strong>×©×:</strong> ${name} | <strong>×’×™×œ:</strong> ${age}</p>
                <p><strong>×©×’×¨×”:</strong> ${routine}</p>
                <p>${routineText}</p>
                <p><strong>××™×§×•×:</strong> ${location}</p>
                <p><strong>×”×¡×™×˜×•××¦×™×”:</strong> ${moment}</p>
                <p><strong>×‘×¤×•×¢×œ:</strong> ${action}</p>
                <p><strong>×”×¨×’×©×”:</strong> ${emotion}</p>
                <p><strong>×”×©×¤×¢×”:</strong> ${impactType}</p>
                <p>${impactText}</p>
                <p><strong>×¦×™×˜×•×˜:</strong> "${quote}"</p>
                <p><strong>××©×¤×˜ ×”×‘×¢×™×”:</strong> ${problemSentence}</p>
            </div>
            <div class="image-side">
                <img src="girl.png" onerror="this.style.display='none'">
            </div>
        </div>
    </div>`;

    const element = document.querySelector('.final-wrapper');

    if (typeof html2pdf === 'undefined') {
        alert('×¡×¤×¨×™×™×ª PDF ×œ× × ×˜×¢× ×”. ×‘×“×•×§ ×—×™×‘×•×¨ ××™× ×˜×¨× ×˜.');
        return;
    }

    // ×—×©×•×‘: ××œ×× ×˜ ×¢× display:none ×œ× ××¨×•× ×“×¨ ×œ-PDF
    summary.style.display = 'block';

    html2pdf().set({
        margin: 0,
        filename: 'persona.pdf',
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    }).from(element).save().then(() => {
        summary.style.display = 'none';
    });
}
</script>

</body>
</html>
