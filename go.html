<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<title>בדיקת מציאות והגדרת מוצר (GO)</title>

<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600;700&family=Assistant:wght@400;600&display=swap" rel="stylesheet">

<style>
body {
    font-family: 'Assistant', sans-serif;
    direction: rtl;
    margin: 0;
    background: #f4f5f7;
    padding: 20px;
}

#formArea {
    max-width: 900px;
    margin: 0 auto;
    background: white;
    padding: 40px;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.06);
}

h1 {
    font-family: 'Rubik';
    text-align: center;
    color: #7c3aed;
}

h2 {
    margin-top: 40px;
    color: #111827;
    border-bottom: 2px solid #eee;
    padding-bottom: 6px;
}

label {
    display: block;
    font-weight: 600;
    margin: 20px 0 8px;
}

textarea, input[type="text"] {
    width: 100%;
    padding: 10px;
    font-size: 15px;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    box-sizing: border-box;
}

textarea {
    min-height: 70px;
    resize: vertical;
}

.checkboxArea {
    margin-top: 20px;
}

.checkboxArea label {
    font-weight: 500;
    display: block;
    margin: 8px 0;
    cursor: pointer;
}

#sectionB {
    border: 2px solid transparent;
    border-radius: 12px;
    padding: 8px 12px 16px;
    margin-top: 20px;
    transition: border-color 0.2s ease, background-color 0.2s ease;
}

#sectionB.go-active {
    border-color: #16a34a;
    background-color: #f0fdf4;
}

#sectionB .go-label {
    color: #166534;
    font-weight: 700;
}

#summaryArea {
    display: none;
    direction: rtl;
    text-align: right;
    font-family: 'Assistant', sans-serif;
    color: #111827;
    line-height: 1.7;
}

#summaryArea h3 {
    margin: 0 0 8px;
    color: #111827;
}

#summaryArea p {
    margin: 0 0 10px;
}

button {
    margin-top: 40px;
    width: 100%;
    padding: 18px;
    font-size: 18px;
    border: none;
    border-radius: 40px;
    background: linear-gradient(90deg,#7c3aed,#ec4899);
    color: white;
    font-weight: 700;
    cursor: pointer;
}
</style>
</head>

<body>

<div id="formArea">

<h1>דף עבודה – בדיקת מציאות והגדרת מוצר</h1>

<h2>חלק א’ – בדיקת מציאות</h2>

<label>1. מה הבעיה המדויקת שהמוצר פותר?</label>
<textarea id="problem1"></textarea>

<label>2. למי זה מתאים? (קהל יעד ספציפי)</label>
<textarea id="audience"></textarea>

<label>3. למה זו בעיה אמיתית ולא רגעית?</label>
<textarea id="realProblem"></textarea>

<label>4. למה זה Must Have ולא Nice To Have?</label>
<textarea id="mustHave"></textarea>

<label>5. מה מייחד אותנו ממה שכבר קיים?</label>
<textarea id="unique"></textarea>

<div class="checkboxArea">
<label><input type="radio" name="decision" value="GO"> אנחנו מסמנות GO וממשיכות לאפיון</label>
<label><input type="radio" name="decision" value="REFINE"> אנחנו צריכות לדייק לפני שממשיכות</label>
</div>

<div id="sectionB">
<h2>חלק ב’ – אפיון ראשוני (רק אם סימנו GO)</h2>

<label>שם מוצר (זמני):</label>
<input type="text" id="productName">

<label>ניסוח סופי של הבעיה:</label>
<textarea id="finalProblem"></textarea>

<label>קהל יעד:</label>
<textarea id="finalAudience"></textarea>

<label>הפתרון שלנו:</label>
<textarea id="solution"></textarea>

<label>מה המשתמשת עושה בפועל?</label>
<textarea id="userAction"></textarea>

<label>מה משתנה לה אחרי שימוש?</label>
<textarea id="afterUse"></textarea>

<label>כך זה עובד – שלב 1:</label>
<textarea id="step1"></textarea>

<label>שלב 2:</label>
<textarea id="step2"></textarea>

<label>שלב 3:</label>
<textarea id="step3"></textarea>
</div>

<div id="summaryArea"></div>

<button onclick="generatePDF()">הורדת PDF</button>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<script>
function val(id){
    return document.getElementById(id).value.trim() || "לא צוין";
}

function toggleGoHighlight(){
    const decision = document.querySelector('input[name="decision"]:checked');
    const sectionB = document.getElementById('sectionB');
    const heading = sectionB.querySelector('h2');
    const isGo = decision && decision.value === 'GO';

    sectionB.classList.toggle('go-active', isGo);
    heading.classList.toggle('go-label', isGo);
}

document.querySelectorAll('input[name="decision"]').forEach((radio) => {
    radio.addEventListener('change', toggleGoHighlight);
});

toggleGoHighlight();

async function generatePDF(){
const decision = document.querySelector('input[name="decision"]:checked');
const summaryArea = document.getElementById('summaryArea');
const sections = [
    ['בעיה מדויקת', val('problem1')],
    ['קהל יעד', val('audience')],
    ['למה זו בעיה אמיתית', val('realProblem')],
    ['למה Must Have', val('mustHave')],
    ['ערך ייחודי', val('unique')],
    ['החלטה', decision ? decision.value : 'לא סומן']
];

if(decision && decision.value === 'GO'){
    sections.push(
        ['שם מוצר', val('productName')],
        ['בעיה סופית', val('finalProblem')],
        ['קהל יעד סופי', val('finalAudience')],
        ['פתרון', val('solution')],
        ['פעולת משתמשת', val('userAction')],
        ['מה משתנה', val('afterUse')],
        ['שלב 1', val('step1')],
        ['שלב 2', val('step2')],
        ['שלב 3', val('step3')]
    );
}

summaryArea.innerHTML = `
    <h3>בדיקת מציאות והגדרת מוצר (GO)</h3>
    ${sections.map(([title, content]) => `<p><strong>${title}:</strong> ${content}</p>`).join('')}
`;

summaryArea.style.display = 'block';

await html2pdf().from(summaryArea).set({
    margin: 10,
    filename: 'GO_product_definition.pdf',
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: { scale: 2 },
    jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
}).save();

summaryArea.style.display = 'none';
}
</script>

</body>
</html>
